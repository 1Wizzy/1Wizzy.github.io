---
title: "2023æš‘å‡ByteDanceé’è®­è¥ç¬”è®°"
date: 2023-07-26 00:00
categories: ['Note', 'FrontEnd']
tags: ['Note', 'FrontEnd']
---



## 2023 æš‘å‡ ByteDance é’è®­è¥

## Lesson 1 å‰ç«¯è¯­è¨€ä¸²è®²

VideoLink: [å‰ç«¯è¯­è¨€ä¸²è®² - æ˜é‡‘](https://juejin.cn/course/bytetech/7219155491984212024/section/7221509542458097725)

### å‰ç«¯è¯­è¨€çš„åŸºæœ¬èƒ½åŠ›

![](static/KuxubYfGPoOWhrxXrUNc3ef0nud.png)

#### Browser

Browser é€šå¸¸åŒ…å«ä¸¤ç§å¼•æ“ï¼šæ¸²æŸ“å¼•æ“ å’Œ JavaScript å¼•æ“

æ¸²æŸ“å¼•æ“çš„å·¥ä½œå¦‚ä¸‹ï¼š

![](static/BJ4abiGTgoY89mxfjfUcQfcgnLf.png)

JavaScript å¼•æ“çš„å·¥ä½œå¦‚ä¸‹ï¼šï¼ˆä»¥ V8 ä¸ºä¾‹ï¼‰

![](static/KyY5b9LUrodGrLx5GaccomIwn3c.png)

### å‰ç«¯è¯­è¨€çš„åä½œé…åˆ

#### Trending

![](static/U5iIbXe5jo4iW3xYvXGcg2vanoc.png)

#### CSS in HTML

- Inline CSS

```css
<p style="color: blue;"> This is a paragraph. </p>
```

- Internal CSS

```css
<head>
    <style type = text/css>
        body {background-color: blue;}
        p {color: yellow;}
    </style>
</head>
```

- External CSS

```css
<head>
    <link rel="stylesheet" type="text/css" herf="style.css">
</head>
```

#### JavaScript in HTML

JavaScript in HTML æœ‰ä¸ªå¾ˆé‡è¦çš„å†…å®¹â€”â€”DOMï¼šå®ƒæŠŠé¡µé¢ä¸Š HTML è½¬åŒ–ä¸º Javascript å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š

![](static/MMsUbNOkxo2nACxiGt1cCg9dnub.png)

äº‹ä»¶æœºåˆ¶ï¼š

![](static/NsIsblCTkobucmxKeLlclTh1n8b.png)

ä»»åŠ¡æœºåˆ¶ï¼š

![](static/ASD8bkRquocsqPxLVPfcDnV0nGf.png)

> MICROTASK First

#### HTML in Javascript

é€šè¿‡ Javascript ä¿®æ”¹ HTML

![](static/PwBBbtLdEo0i4WxRbYocrvZAnth.png)

#### CSS in Javascript

é€šè¿‡ Javascript ä¿®æ”¹ CSS

![](static/B4bzbKXYlot0oGxGa3ic4hnQnYC.png)

### HTML

![](static/ZUXbbHkT2oibYsxhZvWcl4XXnGf.png)

#### HTML DTD

HTML å¹¶éå›¾çµå®Œå¤‡ï¼Œå®ƒåªæ˜¯ä¸€é—¨æ ‡è®°è¯­è¨€ï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹

![](static/L3a8bLViyovj91xB2FDcHJkmnof.png)

#### HTML å…¨éƒ¨æ ‡ç­¾åˆ†ç±»

![](static/NWH8bBV7BoUHytxjByTcppP0nrb.png)

#### HTML head Tag

![](static/GnIqbYHajoVryDxiqOQcHyO3nTf.png)

#### HTML body Tag

![](static/CULzbr4pFonLt7x4svScWMl1nKf.png)

#### HTML ARIA

äº†è§£ ARIA å¹¶éåªæ˜¯ä¸ºäº†ä¾›ç›²äººé˜…è¯»ï¼Œå®ƒå¯ä»¥ä¸ºæˆ‘ä»¬è®¾è®¡ UI ç³»ç»Ÿæä¾›æŒ‡å¯¼æ„ä¹‰ã€‚

![](static/L63gb9fWrobwv3xDBQYcbUiOnN8.png)

#### HTML5 è¯­ä¹‰åŒ–æ ‡ç­¾

![](static/UATwbPF7eoZhYsxppojcdSJjnye.png)

#### HTML5 è¡¨å•å¢å¼º

![](static/FaN7bMQyfomlKxx3FBucVEEinMd.png)

#### HTML å­˜å‚¨

![](static/I8dcbfIx3olXnpxox4Zcp8hdnZf.png)

#### HTML IndexedDB

![](static/TFCibE2GYo9ovexpueecEZrWnHb.png)

#### HTML5 PWA & AWP

![](static/PPiXbHNCgooLrkxtYg1cMmySnKL.png)
![](static/OActblHYHobi73x8mY9cSgmPnNh.png)

#### HTML5 Audio

![](static/TCFMbaGo7oPGogxyDX0c6ElsnMb.png)

#### HTML5 Video

![](static/Krd4bsmWDoLDBjxUnlScJEgMnAe.png)

#### HTML5 Binary

![](static/U0LfbARf0oh41mxQXRpc8duZnh9.png)

#### HTML5 API

![](static/ESH6bX1mqo9qS4xxYBNc8K4XnQh.png)

#### HTML5 Worker

![](static/XWbFbage0oCJSExM1fWchHTWn0f.png)

#### HTML5 Web Socket

![](static/Aa7Mb8duuoQ8dQxO4RZcou4EnWb.png)

```javascript
// Create WebSocket connection.
const socket = new WebSocket('ws://localhost:8080')
// Connection opened
socket.addEventListener('open'ï¼Œ(event) => {
    socket.send('Hello Server!');
});
// Listen for messages
socket.addEventListener('message'ï¼Œ (event) => {
    console.log('Message from server 'ï¼Œevent.data);
});
```

#### HTML5 Shadow DOM

![](static/Wf4Zb0i5Toa5AfxVOBkc6s8knch.png)

#### HTML5 Web Component

è‡ªå®šä¹‰æ ‡ç­¾çš„èƒ½åŠ›

![](static/GH4jbhO2bo72mNxsIcqcXQlonZg.png)

#### HTML5 SVG & Canvas

![](static/My31b4TQvo5chvx02VScHe0knXe.png)
![](static/YVGKbPdmFo7hA2xAU45cFzq1nPd.png)

#### WebGL & WebGPU

![](static/Ff7DbcKtlopAEaxZ4vkcFZ3gnDd.png)

![](static/Ss0jbK51KoOt4JxSRrTcFuLlnld.png)

#### HTML5 WebAssembly

WebAssembly(WSAM) æ˜¯ä¸€ç§æ–°çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ

![](static/ZqTjbHQWCoAUgxxUEdTcddeGnbb.png)

![](static/SKrSbgN15oZq08x5cxxcQnmjnPd.png)

### æ‹“å±•äº¤æµ

#### Web çš„é£é¡

![](static/LShob7prGo6hkSxnBidc6s6Gntf.png)

#### å¤§å‰ç«¯

![](static/XeGfbhQd9oMPUAxNoBmcpTxEnQh.png)
![](static/AAipbsKCbo9ouhxhYNycQocDnFe.png)

![](static/IrqzbY1TSoTeM2xpLDMcXwOdnVe.png)

#### MVC & MVVM & MVP

![](static/RMiKbvXGeoBuWaxJzNucASHnnSg.png)

![](static/SjlCb4YMKo4IwUxkyaPcAvFXnte.png)
![](static/EvwKb5NfHo9xahx8uBLcb3hEnoG.png)
![](static/J12xbnZnvoSCk9xKEiocSKLonKd.png)

### æ€»ç»“

![](static/UtkgbI21CoZOv0xuFk2cDnsfnCb.png)

## Lesson 3 æ·±å…¥ CSS

### CSS æ˜¯ä»€ä¹ˆï¼Ÿ

- Cascading Style Sheets
- ç”¨æ¥å®šä¹‰é¡µé¢å…ƒç´ çš„æ ·å¼

  - è®¾ç½®å­—ä½“å’Œé¢œè‰²
  - è®¾ç½®ä½ç½®å’Œå¤§å°
  - æ·»åŠ åŠ¨ç”»æ•ˆæœ
- CSS çš„åŸºæœ¬

![](static/EPvXbqbLyozVgMxpPaAcP6JSnne.png)

### åœ¨é¡µé¢ä½¿ç”¨ CSS

- å¤–é“¾(Recommend)

```html
<link rel="stylesheet" href="/assets/style/css">
```

- åµŒå…¥

```html
<style>
    li { margin: 0; list-style: none; }
    p { margin: lem 0; }
</style>
```

- å†…è”

```html
<p style="margin: lem 0">Example Content</p>
```

Simple Example: [codepen.io](https://codepen.io/webzhao/embed/mdBGZMe?default-tab=html%2Cresult&editable=true&theme-id=40116)

### CSS æ˜¯å¦‚ä½•å·¥ä½œçš„

![](static/YTZ8bbS6mo4fCRxr4ZWc4M23nzb.png)

### é€‰æ‹©å™¨

- æ‰¾å‡ºé¡µé¢ä¸­çš„å…ƒç´ ï¼Œä»¥ä¾¿ç»™ä»–ä»¬è®¾ç½®æ ·å¼
- ä½¿ç”¨å¤šç§æ–¹å¼é€‰æ‹©å…ƒç´ 

  - æŒ‰ç…§æ ‡ç­¾åã€ç±»åæˆ– id
  - æŒ‰ç…§å±æ€§
  - æŒ‰ç…§ DOM æ ‘ä¸­çš„ä½ç½®

#### ä¸€äº›å¸¸è§„çš„é€‰æ‹©å™¨:

- é€šé…é€‰æ‹©å™¨ *

```html
<h1>This is heading</h1>
<p>this is some paragraph.</p>

<style>
* {
  color: red;
  font-size: 20px;
}
</style>
```

- æ ‡ç­¾é€‰æ‹©å™¨ h1

```html
<h1>This is heading</h1>
<p>this is some paragraph.</p>

<style>
h1 {
  color: orange;
}
p {
  color: gray;
  font-size: 20px;
}
</style>
```

- id é€‰æ‹©å™¨ #id

```html
<h1 id="logo">
  <img src="https://assets.codepen.io/59477/h5-logo.svg" alt="HTML5 logo" width="48" />
  HTML5 æ–‡æ¡£
<h1>

<style>
  #logo {
    font-size: 60px;
    font-weight: 200;
  }
</style>
```

- ç±»é€‰æ‹©å™¨ .class

```html
<h2>Todo List</h2>
<ul>
  <li class="done">Learn HTML</li>
  <li class="done">Learn CSS</li>
  <li>Learn JavaScript</li>
</ul>
<style>
.done {
  color: gray;
  text-decoration: line-through;
}
</style>
```

- å±æ€§é€‰æ‹©å™¨ [property] or label[property=value]

```html
<label>ç”¨æˆ·åï¼š</label>
<input value="zhao" disabled />

<label>å¯†ç ï¼š</label>
<input value="123456" type="password" />

<style>
  [disabled] {
    background: #eee;
    color: #999;
  }
</style>
```

```html
<p>
  <label>å¯†ç ï¼š</label>
  <input type="password" value="123456" />
</p>

<style>
  input[type="password"] {
    border-color: red;
    color: red;
  }
</style>
```

```html
<p><a href="#top">å›åˆ°é¡¶éƒ¨</a></p>
<p><a href="a.jpg">æŸ¥çœ‹å›¾ç‰‡</a></p>

<style>
  a[href^="#"] {
    color: #f54767;
    background: 0 center/1em url(https://assets.codepen.io/59477/arrow-up.png) no-repeat;
    padding-left: 1.1em;
  }
 
  a[href$=".jpg"] {
    color: deepskyblue;
    background: 0 center/1em url(https://assets.codepen.io/59477/image3.png) no-repeat;
    padding-left: 1.2em;
  }
</style>
```

#### ä¼ªç±»(pseudo-classes)é€‰æ‹©å™¨

ä¼ªç±»ï¼šçˆ¶äº²èŠ‚ç‚¹çš„ç›¸å¯¹ä½ç½®

- ä¸åŸºäºæ ‡ç­¾å’Œå±æ€§å®šä½å…ƒç´ 
- å‡ ç§ä¼ªç±»

  - çŠ¶æ€ä¼ªç±»ï¼šå…ƒç´ å¤„äºæŸç§çŠ¶æ€

```html
<a href="http://example.com">
  example.com
</a>

<label>
  ç”¨æˆ·åï¼š
  <input type="text">
</label>

<style>
a:link {
  color: black;
}

a:visited {
  color: gray;
}

a:hover {
  color: orange;
}

a:active {
  color: red;
}

:focus {
  outline: 2px solid orange;
}
</style>
```

- ç»“æ„å‹ä¼ªç±»ï¼šé€šè¿‡ DOM æ ‘

```html
<ol>
  <li>é˜¿å‡¡è¾¾</li>
  <li>æ³°å¦å°¼å…‹å·</li>
  <li>æ˜Ÿçƒå¤§æˆ˜ï¼šåŸåŠ›è§‰é†’</li>
  <li>å¤ä»‡è€…è”ç›Ÿ 3</li>
  <li>ä¾ç½—çºªä¸–ç•Œ</li>
</ol>

<style>
li {
  list-style-position: inside;
  border-bottom: 1px solid;
  padding: 0.5em
}

li:first-child {
  color: coral
}

li:last-child {
  border-bottom: none;
}
</style>
```

#### ç»„åˆ(Combinators)é€‰æ‹©å™¨

<table>
<tr>
<td>åç§°<br/></td><td>è¯­æ³•<br/></td><td>è¯´æ˜<br/></td><td>ç¤ºä¾‹<br/></td></tr>
<tr>
<td>ç›´æ¥ç»„åˆ<br/></td><td>AB<br/></td><td>æ»¡è¶³ A åŒæ—¶æ»¡è¶³ B<br/></td><td>input: focus<br/></td></tr>
<tr>
<td>åä»£ç»„åˆ<br/></td><td>A B<br/></td><td>é€‰ä¸­ Bï¼Œå¦‚æœå®ƒæ˜¯ A çš„å­å­™<br/></td><td>nav a<br/></td></tr>
<tr>
<td>äº²è‡ªç»„åˆ<br/></td><td>A > B<br/></td><td>é€‰ä¸­ Bï¼Œå¦‚æœå®ƒæ˜¯ A çš„å­å…ƒç´ <br/></td><td>section > p<br/></td></tr>
<tr>
<td>å…„å¼Ÿé€‰æ‹©å™¨<br/></td><td>A ~ B<br/></td><td>é€‰ä¸­ Bï¼Œå¦‚æœå®ƒåœ¨ A åä¸”å’Œ A åŒçº§<br/></td><td>h2 ~p<br/></td></tr>
<tr>
<td>ç›¸é‚»é€‰æ‹©å™¨<br/></td><td>A + B<br/></td><td>é€‰ä¸­ Bï¼Œå¦‚æœå®ƒç´§è·Ÿåœ¨ A åé¢<br/></td><td>h2 + p<br/></td></tr>
</table>

```html
<label>
  ç”¨æˆ·åï¼š
  <input class="error" value="aa">
</label>
<span class="error">
  æœ€å°‘3ä¸ªå­—ç¬¦
</span>

<style>
  .error {
    color: red;
  }
  
  input.error {
    border-color: red;
  }
</style>
```

```html
<article>
  <h1>æ‹‰æ£®ç«å±±å›½å®¶å…¬å›­</h1>
  <p>æ‹‰æ£®ç«å±±å›½å®¶å…¬å›­æ˜¯ä½äº...</p>
  <section>
    <h2>æ°”å€™</h2>
    <p>å› ä¸ºæ‹‰æ£®ç«å±±å›½å®¶å…¬å›­...</p>
    <p>é«˜äºè¿™ä¸ªé«˜åº¦ï¼Œæ°”å€™éå¸¸å¯’å†·...</p>
  </section>
</article>

<style>
  article p {
    color: black;
  }

  article > p {
    color: blue;
  }

  h2 + p {
    color: red; 
  }
</style>
```

#### é€‰æ‹©å™¨ç»„

```css
body, h1, h2, h3, h4, h5, h6, ul, ol, li {
    margin: 0;
    padding: 0;
}

[type="checkbox"], [type="radio"] {
    box-sizing: border-box;
    padding: 0;
}
```

### é¢œè‰²

#### è¡¨ç¤ºæ–¹å¼

- RGB

Example rgb(143, 172, 135) æˆ– #8fac87

ç¼ºç‚¹ï¼šä¸æ˜“è¡¨è¾¾

- HSL

![](static/Bf2obMGmaol6Ohx5pTNcJwWgnef.png)

Exampleï¼šhsl(18, 66%, 55%)

- å…³é”®å­—

![](static/RwNJbNXAto1REnxlKaccNlQMnjT.png)

#### alpha é€æ˜åº¦

Example:

æ–°æ—¶ä»£æµè§ˆå™¨å¯èƒ½ä¸éœ€è¦ `a`

### å­—ä½“æ— font-family

ä¾‹å¦‚é€šå¸¸ä¸º

```css
h1 {
    /* æ–œä½“ ç²—ç»† å¤§å°/è¡Œé«˜ å­—ä½“æ— */
    font: bold 14px/1.7 Helvetica, sans-serif;
}
p {
    font: 14px serif;
}
```

å­—ä½“æ—åœ¨é‡åˆ°è®¾å¤‡ä¸­ä¸å­˜åœ¨å­—ä½“æ—¶ä¼šä¾æ¬¡å‘ä¸‹æ˜¾ç¤º

```html
<h1>å¡å°”æ–¯å·´å¾·æ´çªŸï¼ˆCarlsbad Cavernsï¼‰</h1>
<p>å¡å°”æ–¯å·´å¾·æ´çªŸï¼ˆCarlsbad Cavernsï¼‰æ˜¯ç¾å›½çš„
ä¸€åº§å›½å®¶å…¬å›­ï¼Œä½äºæ–°å¢¨è¥¿å“¥å·ä¸œå—éƒ¨ã€‚æ¸¸å®¢å¯ä»¥é€šè¿‡å¤©
ç„¶å…¥å£å¾’æ­¥è¿›å…¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç”µæ¢¯ç›´æ¥åˆ°è¾¾230ç±³çš„æ´ç©´
æ·±å¤„ã€‚</p>

<style>
  h1 {
    font-family: Optima, Georgia, serif;
  }
  body {
    font-family: Helvetica, sans-serif;
  }
</style>
```

ä¸€äº›é€šç”¨å­—ä½“æ—ï¼š

- Serif è¡¬çº¿ä½“ï¼šGeorgiaã€å®‹ä½“
- Sans-Serif æ— è¡¬çº¿ä½“ï¼šArialã€Helveticaã€é»‘ä½“ã€å¾®è½¯é›…é»‘
- Cursive æ‰‹å†™ä½“ï¼šCaflisch Scriptã€æ¥·ä½“
- Fantasyï¼šComic Sans MS, Papyrus
- Monospace ç­‰å®½å­—ä½“ï¼šConsolasï¼ŒCourierã€ä¸­æ–‡å­—ä½“

> å¦‚æœå­—ä½“éƒ½æ²¡æœ‰çš„è¯ï¼Œä¼šé‡‡ç”¨é€šç”¨å­—ä½“æ—
> ä¼šå…ˆè¡Œæ¸²æŸ“ç¬¬ä¸€ä¸ªå­—ä½“æœ‰çš„å­—ç¬¦ï¼Œè‹¥æ²¡æœ‰ä¾æ¬¡å‘ä¸‹æ¸²æŸ“
> å»ºè®®ï¼šå­—ä½“åˆ—è¡¨æœ€åå†™ä¸Šé€šç”¨å­—ä½“æ—
> è‹±æ–‡å­—ä½“æ”¾åœ¨ä¸­æ–‡å­—ä½“å‰é¢

#### ä½¿ç”¨ Web-Font

```html
<h1>Web fonts are awesome!</h1>

<style>
  @font-face {
    font-family: "Megrim";
    src: url(https://fonts.gstatic.com/s/megrim/v11/46kulbz5WjvLqJZVam_hVUdI1w.woff2) format('woff2');
  }

  h1 {
    font-family: Megrim, Cursive;
  }
</style>
```

```html
<style>
  @font-face {
    font-family: f1;
    src: url("//s2.ssl.qhimg.com/static/ff00cb8151eeecd2.woff2") format("woff2");
  }

  @font-face {
    font-family: f2;
    src: url("//s3.ssl.qhimg.com/static/a59a90c9e8f21898.woff2") format("woff2");
  }

  @font-face {
    font-family: f3;
    src: url("//s2.ssl.qhimg.com/static/58324737c4cb53a5.woff2") format("woff2");
  }

  h1 {
    font-size: 50px;
  }
</style>

<h1 style="font-family: f1, serif">è½éœä¸å­¤é¹œé½é£ï¼Œç§‹æ°´å…±é•¿å¤©ä¸€è‰²ã€‚</h1>
<h1 style="font-family: f2, serif">è½éœä¸å­¤é¹œé½é£ï¼Œç§‹æ°´å…±é•¿å¤©ä¸€è‰²ã€‚</h1>
<h1 style="font-family: f3, serif">è½éœä¸å­¤é¹œé½é£ï¼Œç§‹æ°´å…±é•¿å¤©ä¸€è‰²ã€‚</h1>
```

> ä¸­æ–‡å­—ä½“è¾ƒå¤§ï¼Œå»ºè®®å…ˆè£å‰ªéœ€è¦çš„å­—

#### å­—ä½“ä¸€äº›å±æ€§

- Font-size

  - å…³é”®å­—ï¼š smallã€mediumã€large
  - é•¿åº¦ï¼špxã€em
  - ç™¾åˆ†æ•°ï¼šç›¸å¯¹äºçˆ¶å…ƒç´ å­—ä½“å¤§å°
  - -

    > éœ€è¦å­—ä½“æ”¯æŒ font-weight
    >
- line-height
  -----------

### é€‰æ‹©å™¨çš„ç‰¹å¼‚åº¦(Specificity)

![](static/NgtHbIes1oPqQFxzWJgcqHvmn2f.png)

è¶Šå°è¶Šä¼˜å…ˆ

Exampleï¼š

```html
<button class="btn">æ™®é€šæŒ‰é’®</button>
<button class="btn primary">ä¸»è¦æŒ‰é’®</button>
<style>
  .btn {
    display: inline-block;
    padding: .36em .8em;
    margin-right: .5em;
    line-height: 1.5;
    text-align: center;
    cursor: pointer;
    border-radius: .3em;
    border: none;
    background: #e6e6e6;
    color: #333;
  }
  .btn.primary {
    color: #fff;
    background: #218de6;
    /* è¦†ç›–ä¸ç»§æ‰¿ */
  }
</style>
```

### CSS çš„ç»§æ‰¿

æŸäº›å±æ€§ä¼šè‡ªåŠ¨ç»§æ‰¿å…¶çˆ¶å…ƒç´ çš„**è®¡ç®—å€¼**ï¼Œé™¤éæ˜¾å¼æŒ‡å®šä¸€ä¸ªå€¼

```html
<p>This is a <em>test</em> of <strong>inherit</strong></p>

<style>
  body {
    font-size: 20px;
  }
  p {
    color: blue;
  }
  em {
    color: red;
  }
</style>
```

æ˜¾å¼ç»§æ‰¿

```css
* {
    box-sizing: inherit; /*é»˜è®¤ä¸ç»§æ‰¿éœ€è¦æ˜¾å¼ç»§æ‰¿*/
}
html {
    box-sizing: border-box;
}
.some-widget {
    box-sizing: content-box;
}
```

### CSS çš„åˆå§‹å€¼

- CSS ä¸­ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªåˆå§‹å€¼

  - background-color çš„åˆå§‹å€¼ä¸º transparent
  - margin-left çš„åˆå§‹å€¼ä¸º 0
- å¯ä»¥ä½¿ç”¨ initial å…³é”®å­—æ˜¾å¼é‡ç½®ä¸ºåˆå§‹å€¼

  - background-color: initial

### CSS æ±‚å€¼è¿‡ç¨‹

![](static/M9YhbT5FUoBxbrxo5Cvcd5jXnOg.png)
![](static/KwhNbv81po1qw7xOf7Ccrmrdn3e.png)
![](static/TH4nb7InNo5kvrxwlY7cFJD6nB4.png)

### å¸ƒå±€

![](static/Q69rbCeQmorsRRxIrw4cbP58ncd.png)

- ç¡®å®šå†…å®¹çš„å¤§å°å’Œä½ç½®çš„ç®—æ³•
- ä¾æ®å…ƒç´ ã€å®¹å™¨ã€å…„å¼ŸèŠ‚ç‚¹å’Œå†…å®¹ç­‰ä¿¡æ¯æ¥è®¡ç®—

#### å¸ƒå±€ç›¸å…³æŠ€æœ¯

![](static/LNYxbnoKBoKk5Hx4AvtcufQVn6d.png)

ç›’æ¨¡å‹

![](static/E8zOb5DpboDVdGx6dKUcIv5Vnhg.png)
![](static/PDSmbQRtqoQlq1xPy9lcaiaxn0g.png)

- width

  - æŒ‡å®š content box å®½åº¦
  - å–å€¼ä¸ºé•¿åº¦ã€ç™¾åˆ†æ•°ã€auto
  - auto ç”±æµè§ˆå™¨æ ¹æ®å…¶å®ƒå±æ€§ç¡®å®š
  - ç™¾åˆ†æ•°ç›¸å¯¹äºå®¹å™¨çš„ content box å®½åº¦
- height

  - æŒ‡å®š content box é«˜åº¦
  - å–å€¼ä¸ºé•¿åº¦ã€ç™¾åˆ†æ•°ã€auto
  - auto å–å€¼ç”±å†…å®¹è®¡ç®—å¾—æ¥
  - ç™¾åˆ†æ•°ç›¸å¯¹äºå®¹å™¨çš„ content box é«˜åº¦
  - å®¹å™¨æœ‰æŒ‡å®šçš„é«˜åº¦æ—¶ï¼Œç™¾åˆ†æ•°æ‰ç”Ÿæ•ˆ
- padding

  - æŒ‡å®šå…ƒç´ å››ä¸ªæ–¹å‘çš„å†…è¾¹è·
  - ç™¾åˆ†æ•°ç›¸å¯¹äºå®¹å™¨å®½åº¦
- border

  - æŒ‡å®šå®¹å™¨è¾¹æ¡†æ ·å¼ã€ç²—ç»†å’Œé¢œè‰²
  - ä¸‰ç§å±æ€§ï¼šborder-width border-style border-color
  - å››ä¸ªæ–¹å‘ï¼šborder-top boder-right border-bottom border-left
- margin

  - æŒ‡å®šå…ƒç´ å››ä¸ªæ–¹å‘çš„å¤–è¾¹è·
  - å–å€¼å¯ä»¥æ˜¯é•¿åº¦ã€ç™¾åˆ†æ•°ã€auto
  - ç™¾åˆ†æ•°ç›¸å¯¹äºå®¹å™¨å®½åº¦
  - ä½¿ç”¨ margin: auto æ°´å¹³å±…ä¸­

```html
<div></div>

<style>
  div {
    width: 200px;
    height: 200px;
    background: coral;
    margin-left: auto;
    margin-right: auto;
  }
  html {
  background: #333;
}
</style>
```

- margin collapseï¼šå½“ä¸¤ä¸ªç›¸é‚»å…ƒç´ çš„ä¹‹é—´çš„è¾¹è·åªå– maxï¼ˆä¾‹ï¼ŒA çš„ä¸‹è¾¹è·ä¸º 100ï¼Œ B çš„ä¸Šè¾¹è·ä¸º 110ï¼ŒAB ä¸Šä¸‹è¾¹è·ä¸º 110ï¼‰
- box-sizing: border-box

![](static/Vn64bdy5dofna3xZlHycWyFMnhg.png)

- overflow æ–‡æœ¬è¶…å‡ºå®¹å™¨å¤„ç†æ–¹å¼
  - Visibleï¼šå¯è§
  - Hiddenï¼šéšè—
  - Scrollï¼šå¯æ»šåŠ¨

#### å—çº§ Versus è¡Œçº§

CSS ä¸­çš„æ¦‚å¿µ

<table>
<tr>
<td>Block Level Box<br/></td><td>Inline Level Box<br/></td></tr>
<tr>
<td>ä¸å’Œå…¶ä»–ç›’å­å¹¶åˆ—æ‘†æ”¾<br/></td><td>å’Œå…¶ä»–è¡Œçº§ç›’å­ä¸€èµ·æ”¾åœ¨ä¸€è¡Œæˆ–æ‹†å¼€æˆå¤šè¡Œ<br/></td></tr>
<tr>
<td>ä½¿ç”¨æ‰€æœ‰çš„ç›’æ¨¡å‹å±æ€§<br/></td><td>ç›’æ¨¡å‹ä¸­çš„widthã€heightä¸å¯ç”¨<br/></td></tr>
</table>

HTML ä¸­çš„æ¦‚å¿µ

<table>
<tr>
<td>å—çº§å…ƒç´ <br/></td><td>è¡Œçº§å…ƒç´ <br/></td></tr>
<tr>
<td>ç”Ÿæˆå—çº§ç›’å­<br/></td><td>- ç”Ÿæˆè¡Œçº§ç›’å­<br/>- å†…å®¹åˆ†æ•£åœ¨å¤šä¸ªè¡Œç›’ï¼ˆLine Boxï¼‰ä¸­<br/></td></tr>
<tr>
<td>body, article, div, main, section, h1-6, p, ul, liç­‰<br/></td><td>span, em, strong, cite, codeç­‰<br/></td></tr>
<tr>
<td>display: block<br/></td><td>display: inline<br/></td></tr>
</table>

> display å±æ€§
> block å—çº§ç›’å­
> inline è¡Œçº§ç›’å­
> inline-block æœ¬èº«æ˜¯è¡Œçº§ï¼Œå¯ä»¥æ”¾åœ¨è¡Œç›’ä¸­;å¯ä»¥è®¾ç½®å®½é«˜;ä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸ä¼šè¢«æ‹†æ•£æˆå¤šè¡Œ
> none æ’ç‰ˆæ—¶å®Œå…¨è¢«å¿½ç•¥

#### å¸¸è§„æµ Normal Flow

- æ ¹å…ƒç´ ã€æµ®åŠ¨å’Œç»å¯¹å®šä½çš„å…ƒç´ ä¼šè„±ç¦»å¸¸è§„æµ
- å…¶å®ƒå…ƒç´ éƒ½åœ¨å¸¸è§„æµä¹‹å†… (in-flow)
- å¸¸è§„æµä¸­çš„ç›’å­ï¼Œåœ¨æŸç§æ’ç‰ˆä¸Šä¸‹æ–‡ä¸­å‚ä¸å¸ƒå±€

##### è¡Œçº§æ’ç‰ˆä¸Šä¸‹æ–‡

- Inline Formatting Context (IFC)
- **åªåŒ…å«è¡Œçº§ç›’å­**çš„å®¹å™¨ä¼šåˆ›å»ºä¸€ä¸ª IFC
- IFC å†…çš„æ’ç‰ˆè§„åˆ™

  - ç›’å­åœ¨ä¸€è¡Œå†…æ°´å¹³æ‘†æ”¾
  - ä¸€è¡Œæ”¾ä¸ä¸‹æ—¶ï¼Œæ¢è¡Œæ˜¾ç¤º
  - text-align å†³å®šä¸€è¡Œå†…ç›’å­çš„æ°´å¹³å¯¹é½
  - vertical-align å†³å®šä¸€ä¸ªç›’å­åœ¨è¡Œå†…çš„å‚ç›´å¯¹é½
  - é¿å¼€æµ®åŠ¨(float)å…ƒç´ *

##### å—çº§æ’ç‰ˆä¸Šä¸‹æ–‡

- Block Formatting Context (BFC)
- æŸäº›å®¹å™¨ä¼šåˆ›å»ºä¸€ä¸ª BFC

  - æ ¹å…ƒç´ 
  - æµ®åŠ¨ã€ç»å¯¹å®šä½ã€inline-block
  - Flex å­é¡¹å’Œ Grid å­é¡¹
  - overflow å€¼ä¸æ˜¯ visible çš„å—ç›’
  - display: flow-root;
- BFC å†…çš„æ’ç‰ˆè§„åˆ™

  - ç›’å­ä»ä¸Šåˆ°ä¸‹æ‘†æ”¾
  - å‚ç›´ margin åˆå¹¶
  - BFC å†…ç›’å­çš„ margin ä¸ä¼šä¸å¤–é¢çš„å«å¹¶
  - BFC ä¸ä¼šå’Œæµ®åŠ¨å…ƒç´ é‡å 

##### Flex Box

- ä¸€ç§æ–°çš„æ’ç‰ˆä¸Šä¸‹æ–‡
- å®ƒå¯ä»¥æ§åˆ¶å­çº§ç›’å­çš„:

  - æ‘†æ”¾çš„æµå‘(â†‘â†“â†â†’)
  - æ‘†æ”¾é¡ºåº
  - ç›’å­å®½åº¦å’Œé«˜åº¦
  - æ°´å¹³å’Œå‚ç›´æ–¹å‘çš„å¯¹é½
  - æ˜¯å¦å…è®¸æŠ˜è¡Œ
- flex-direction

![](static/M2xxbqQ0HoR3jOxP9uJccLA6nHJ.png)

- ä¸»è½´ä¸ä¾§è½´

![](static/PmIEbTbQooRMB0xB20Jc2XPXn0g.png)

- justify-content

![](static/PjMDb3Ep2omvqixc8BNcuJYznxh.png)

- align-items

![](static/HrOIbnG3YoTJyExB5UJcptxGnGX.png)

- align-self

![](static/MT1rbLgiYoUrJCxn3gucdjFVn6g.png)

- order

![](static/X4QAbmay7oC105xWQ1Ncw1P5nLh.png)

- Flexibility

  - å¯ä»¥è®¾ç½®å­é¡¹çš„å¼¹æ€§: å½“å®¹å™¨æœ‰å‰©ä½™ç©ºé—´æ—¶ï¼Œä¼šä¼¸å±•;å®¹å™¨ç©ºé—´ä¸å¤Ÿæ—¶ï¼Œä¼šæ”¶ç¼©ã€‚
  - flex-grow æœ‰å‰©ä½™ç©ºé—´æ—¶çš„ä¼¸å±•èƒ½åŠ›
  - flex-shrink å®¹å™¨ç©ºé—´ä¸è¶³æ—¶æ”¶ç¼©çš„èƒ½åŠ›
  - flex-basis æ²¡æœ‰ä¼¸å±•æˆ–æ”¶ç¼©æ—¶çš„åŸºç¡€é•¿åº¦
- flex-grow
- flex-shrink
- flexï¼šç¼©å†™å­å±æ€§

![](static/NRvibycmGokhnfxNehPcsQggnTf.png)

##### Grid å¸ƒå±€

![](static/WUptbGfb4oGuCkx6nBFcY6sJnWg.png)

- display:grid

  - display: grid ä½¿å…ƒç´ ç”Ÿæˆä¸€ä¸ªå—çº§çš„ Grid å®¹å™¨
  - ä½¿ç”¨ grid-template ç›¸å…³å±æ€§å°†å®¹å™¨åˆ’åˆ†ä¸ºç½‘æ ¼
  - è®¾ç½®æ¯ä¸€ä¸ªå­é¡¹å å“ªäº›è¡Œ/åˆ—
    ![](static/H1iQbFgFGoo6nJxz89ScjlnpnXe.png)
- grid line ç½‘æ ¼çº¿
  ![](static/PUjjbCV6corZvlxi1Kjc3TZLnEe.png)
- grid area ç½‘æ ¼åŒºåŸŸ
  ![](static/IbEAbIhCWokIZixW6xTcuhu3nrb.png)

#### float

#### ç»å¯¹å®šä½ position

- staticï¼šé»˜è®¤å€¼ï¼Œéå®šä½å…ƒç´ 
- relativeï¼šç›¸å¯¹è‡ªèº«åŸæœ¬ä½ç½®åç§»ï¼Œä¸è„±ç¦»æ–‡æ¡£æµ

  - åœ¨å¸¸è§„æµé‡Œé¢å¸ƒå±€
  - ç›¸å¯¹äºè‡ªå·±æœ¬åº”è¯¥åœ¨çš„ä½ç½®è¿›è¡Œåç§»
  - ä½¿ç”¨ topã€leftã€bottomã€right è®¾ç½®åç§»é•¿åº¦
  - æµå†…å…¶å®ƒå…ƒç´ å½“å®ƒæ²¡æœ‰åç§»ä¸€æ ·å¸ƒå±€

  > å¥½åƒç´«è‰²æ–¹å—è¿˜å­˜åœ¨ä¸€æ ·
  >

![](static/JbcPbVr1Oo4BGExxUJfcWRqYnDf.png)

- absoluteï¼šç»å¯¹å®šä½ï¼Œç›¸å¯¹é static ç¥–å…ˆå…ƒç´ å®šä½
  - è„±ç¦»å¸¸è§„æµ
  - ç›¸å¯¹äº**æœ€è¿‘çš„é static ç¥–å…ˆ**å®šä½
  - ä¸ä¼šå¯¹æµå†…å…ƒç´ å¸ƒå±€é€ æˆå½±å“

![](static/RNCUbwXfaozBEzxvesDcbHXfnJd.png)

- fixedï¼šç›¸å¯¹äºè§†å£ç»å¯¹å®šä½

## Lesson 4 å¦‚ä½•å†™å¥½ JavaScript

### å„å¸å…¶èŒ

ç®€å•è¯´å°±æ˜¯

![](static/W1VnbrfcYojsMzxLShIcbPWXnZb.png)

**ä¸¾ä¾‹è¯´æ˜**ï¼šå†™ä¸€æ®µ JSï¼Œæ§åˆ¶ä¸€ä¸ªç½‘é¡µï¼Œè®©å®ƒæ”¯æŒæµ…è‰²å’Œæ·±è‰²ä¸¤ç§æµè§ˆæ¨¡å¼

- Version One
  - Code

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>æ·±å¤œé£Ÿå ‚</title>
</head>
<body>
  <header>
    <button id="modeBtn">ğŸŒ</button>
    <h1>æ·±å¤œé£Ÿå ‚</h1>
  </header>
  <main>
    <div class="pic">
      <img src="https://p2.ssl.qhimg.com/t0120cc20854dc91c1e.jpg">
    </div>
    <div class="description">
      <p>
          è¿™æ˜¯ä¸€é—´è¥ä¸šæ—¶é—´ä»åˆå¤œåäºŒç‚¹åˆ°æ—©ä¸Šä¸ƒç‚¹çš„ç‰¹æ®Šé£Ÿå ‚ã€‚è¿™é‡Œçš„è€æ¿ï¼Œä¸å¤ªçˆ±è¯´è¯ï¼Œå´æ€»å«äººåƒå¾—çƒ­æ³ªç›ˆ
          çœ¶ã€‚åœ¨è¿™é‡Œï¼Œè‡ªå‘çš„èˆè¹ˆæ¼”å‘˜å¶é‡éšé€€å¤šå¹´èˆç•Œå‰è¾ˆï¼Œå‰è¾ˆä¸æƒœè®²è¿°è‡ªå·±ä¸å ªå›é¦–çš„ç»å†ä¸æ–­é¼“èˆå¹´è½»äººï¼Œæœ€ç»ˆä»¤å…¶é‡æ‹¾è‡ªä¿¡ï¼›è½»è¨€ç»äº¤çš„é—ºèœœå› ä¸ºåƒåˆ°å…±åŒå–œçˆ±çš„ç¾é£Ÿï¼Œå›å¿†èµ·ä»å‰çš„å‹è°Šï¼Œé‡å½’äºå¥½ï¼›ä¹è§‚çš„ç»ç—‡æ‚£è€…é‡åˆ°åŒå‘½ç›¸è¿çš„å¥³å­©ï¼Œä¸¤äººç›¸çˆ±å¹¶ç›¸äº’ç»™äºˆåŠ›é‡ï¼Œé™ªä¼´å½¼æ­¤å®Œç¾åœ°èµ°è¿‡äº†æœ€åä¸€ç¨‹ï¼›ä¸€å‘³è¿½æ±‚äº‹ä¸šæˆåŠŸçš„ç™½é¢†ï¼Œåœ¨è¿™é‡Œç»“äº¤äº†çœŸæ­£æš–å¿ƒçš„æœ‹å‹ï¼Œå‘ç°çœŸæƒ…æ¯”æˆåŠŸæ›´æœ‰æ„ä¹‰ã€‚é£Ÿç‰©ã€æ•…äº‹ã€çœŸæƒ…ï¼Œæ±‡èšäº†æ•´éƒ¨å‰§çš„ä¸»é¢˜ï¼Œæ•™ä¼šäººä»¬å¦ç„¶é¢å¯¹å¾—å¤±ï¼Œå¯¹ç”Ÿæ´»å……æ»¡æœŸè®¸å’Œçƒ­æƒ…ã€‚æ¯ä¸€ä¸ªæ•…äº‹èƒŒåéƒ½é¥±å«æ·±æƒ…ï¼Œæƒ…èŠ‚è·Œå®•èµ·ä¼ï¼Œä»¤äººæµè¿å¿˜è¿” [6]  ã€‚
      </p>
    </div>
  </main>
</body>
</html>
```

```css
body, html {
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
}
body {
  padding: 10px;
  box-sizing: border-box;
}
div.pic img {
  width: 100%;
}
#modeBtn {
  font-size: 2rem;
  float: right;
  border: none;
  background: transparent;
}
```

```javascript
const btn = document.getElementById('modeBtn');
btn.addEventListener('click', (e) => {
  const body = document.body;
  if(e.target.innerHTML === 'ğŸŒ') {
    body.style.backgroundColor = 'black';
    body.style.color = 'white';
    e.target.innerHTML = 'ğŸŒœ';
  } else {
    body.style.backgroundColor = 'white';
    body.style.color = 'black';
    e.target.innerHTML = 'ğŸŒ';
  }
});
```

- é€šè¿‡ Javascript æ”¹å˜æ ·å¼ï¼Œä¸å†æ˜¯å„å¸å…¶èŒ
- Version Two

  - Code

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>æ·±å¤œé£Ÿå ‚</title>
</head>
<body>
  <header>
    <button id="modeBtn"></button>
    <h1>æ·±å¤œé£Ÿå ‚</h1>
  </header>
  <main>
    <div class="pic">
      <img src="https://p2.ssl.qhimg.com/t0120cc20854dc91c1e.jpg">
    </div>
    <div class="description">
      <p>
          è¿™æ˜¯ä¸€é—´è¥ä¸šæ—¶é—´ä»åˆå¤œåäºŒç‚¹åˆ°æ—©ä¸Šä¸ƒç‚¹çš„ç‰¹æ®Šé£Ÿå ‚ã€‚è¿™é‡Œçš„è€æ¿ï¼Œä¸å¤ªçˆ±è¯´è¯ï¼Œå´æ€»å«äººåƒå¾—çƒ­æ³ªç›ˆ
          çœ¶ã€‚åœ¨è¿™é‡Œï¼Œè‡ªå‘çš„èˆè¹ˆæ¼”å‘˜å¶é‡éšé€€å¤šå¹´èˆç•Œå‰è¾ˆï¼Œå‰è¾ˆä¸æƒœè®²è¿°è‡ªå·±ä¸å ªå›é¦–çš„ç»å†ä¸æ–­é¼“èˆå¹´è½»äººï¼Œæœ€ç»ˆä»¤å…¶é‡æ‹¾è‡ªä¿¡ï¼›è½»è¨€ç»äº¤çš„é—ºèœœå› ä¸ºåƒåˆ°å…±åŒå–œçˆ±çš„ç¾é£Ÿï¼Œå›å¿†èµ·ä»å‰çš„å‹è°Šï¼Œé‡å½’äºå¥½ï¼›ä¹è§‚çš„ç»ç—‡æ‚£è€…é‡åˆ°åŒå‘½ç›¸è¿çš„å¥³å­©ï¼Œä¸¤äººç›¸çˆ±å¹¶ç›¸äº’ç»™äºˆåŠ›é‡ï¼Œé™ªä¼´å½¼æ­¤å®Œç¾åœ°èµ°è¿‡äº†æœ€åä¸€ç¨‹ï¼›ä¸€å‘³è¿½æ±‚äº‹ä¸šæˆåŠŸçš„ç™½é¢†ï¼Œåœ¨è¿™é‡Œç»“äº¤äº†çœŸæ­£æš–å¿ƒçš„æœ‹å‹ï¼Œå‘ç°çœŸæƒ…æ¯”æˆåŠŸæ›´æœ‰æ„ä¹‰ã€‚é£Ÿç‰©ã€æ•…äº‹ã€çœŸæƒ…ï¼Œæ±‡èšäº†æ•´éƒ¨å‰§çš„ä¸»é¢˜ï¼Œæ•™ä¼šäººä»¬å¦ç„¶é¢å¯¹å¾—å¤±ï¼Œå¯¹ç”Ÿæ´»å……æ»¡æœŸè®¸å’Œçƒ­æƒ…ã€‚æ¯ä¸€ä¸ªæ•…äº‹èƒŒåéƒ½é¥±å«æ·±æƒ…ï¼Œæƒ…èŠ‚è·Œå®•èµ·ä¼ï¼Œä»¤äººæµè¿å¿˜è¿” [6]  ã€‚
      </p>
    </div>
  </main>
</body>
</html>
```

```css
body, html {
  width: 100%;
  height: 100%;
  max-width: 600px;
  padding: 0;
  margin: 0;
  overflow: hidden;
}
body {
  padding: 10px;
  box-sizing: border-box;
  transition: all 1s;
}
div.pic img {
  width: 100%;
}
#modeBtn {
  font-size: 2rem;
  float: right;
  border: none;
  outline: none;
  cursor: pointer;
  background: inherit;
}

body.night {
  background-color: black;
  color: white;
  transition: all 1s;
}

#modeBtn::after {
  content: 'ğŸŒ';
}
body.night #modeBtn::after {
  content: 'ğŸŒœ';
}
```

```javascript
const btn = document.getElementById('modeBtn');
btn.addEventListener('click', (e) => {
  const body = document.body;
  if(body.className !== 'night') {
    body.className = 'night';
  } else {
    body.className = '';
  }
});
```

- ç”¨ Javascript æ§åˆ¶å…ƒç´ ç±»ï¼Œ ç”¨ç±»çš„æ ·å¼æ¥æ§åˆ¶å…ƒç´ 
- Version Three

  - Code

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>æ·±å¤œé£Ÿå ‚</title>
</head>
<body>
  <input id="modeCheckBox" type="checkbox">
  <div class="content">
    <header>
      <label id="modeBtn" for="modeCheckBox"></label>
      <h1>æ·±å¤œé£Ÿå ‚</h1>
    </header>
    <main>
      <div class="pic">
        <img src="https://p2.ssl.qhimg.com/t0120cc20854dc91c1e.jpg">
      </div>
      <div class="description">
        <p>
            è¿™æ˜¯ä¸€é—´è¥ä¸šæ—¶é—´ä»åˆå¤œåäºŒç‚¹åˆ°æ—©ä¸Šä¸ƒç‚¹çš„ç‰¹æ®Šé£Ÿå ‚ã€‚è¿™é‡Œçš„è€æ¿ï¼Œä¸å¤ªçˆ±è¯´è¯ï¼Œå´æ€»å«äººåƒå¾—çƒ­æ³ªç›ˆ
            çœ¶ã€‚åœ¨è¿™é‡Œï¼Œè‡ªå‘çš„èˆè¹ˆæ¼”å‘˜å¶é‡éšé€€å¤šå¹´èˆç•Œå‰è¾ˆï¼Œå‰è¾ˆä¸æƒœè®²è¿°è‡ªå·±ä¸å ªå›é¦–çš„ç»å†ä¸æ–­é¼“èˆå¹´è½»äººï¼Œæœ€ç»ˆä»¤å…¶é‡æ‹¾è‡ªä¿¡ï¼›è½»è¨€ç»äº¤çš„é—ºèœœå› ä¸ºåƒåˆ°å…±åŒå–œçˆ±çš„ç¾é£Ÿï¼Œå›å¿†èµ·ä»å‰çš„å‹è°Šï¼Œé‡å½’äºå¥½ï¼›ä¹è§‚çš„ç»ç—‡æ‚£è€…é‡åˆ°åŒå‘½ç›¸è¿çš„å¥³å­©ï¼Œä¸¤äººç›¸çˆ±å¹¶ç›¸äº’ç»™äºˆåŠ›é‡ï¼Œé™ªä¼´å½¼æ­¤å®Œç¾åœ°èµ°è¿‡äº†æœ€åä¸€ç¨‹ï¼›ä¸€å‘³è¿½æ±‚äº‹ä¸šæˆåŠŸçš„ç™½é¢†ï¼Œåœ¨è¿™é‡Œç»“äº¤äº†çœŸæ­£æš–å¿ƒçš„æœ‹å‹ï¼Œå‘ç°çœŸæƒ…æ¯”æˆåŠŸæ›´æœ‰æ„ä¹‰ã€‚é£Ÿç‰©ã€æ•…äº‹ã€çœŸæƒ…ï¼Œæ±‡èšäº†æ•´éƒ¨å‰§çš„ä¸»é¢˜ï¼Œæ•™ä¼šäººä»¬å¦ç„¶é¢å¯¹å¾—å¤±ï¼Œå¯¹ç”Ÿæ´»å……æ»¡æœŸè®¸å’Œçƒ­æƒ…ã€‚æ¯ä¸€ä¸ªæ•…äº‹èƒŒåéƒ½é¥±å«æ·±æƒ…ï¼Œæƒ…èŠ‚è·Œå®•èµ·ä¼ï¼Œä»¤äººæµè¿å¿˜è¿” [6]  ã€‚
        </p>
      </div>
    </main>
  </div>
</body>
</html>
```

```css
body, html {
  width: 100%;
  height: 100%;
  max-width: 600px;
  padding: 0;
  margin: 0;
  overflow: hidden;
}

body {
  box-sizing: border-box;
}

.content {
  padding: 10px;
  transition: background-color 1s, color 1s;
}

div.pic img {
  width: 100%;
}

#modeCheckBox {
  display: none;
}

#modeCheckBox:checked + .content {
  background-color: black;
  color: white;
  transition: all 1s;
}

#modeBtn {
  font-size: 2rem;
  float: right;
}

#modeBtn::after {
  content: 'ğŸŒ';
}

#modeCheckBox:checked + .content #modeBtn::after {
  content: 'ğŸŒœ';
}
```

- æ— éœ€ Javascriptï¼Œ æ›´åŠ çš„å„å¸å…¶èŒï¼Œä½†ä¸å¼ºæ±‚

ç”±ä¸Šé¢çš„ä¾‹å­å¾—å‡ºçš„**ç»“è®º**ï¼š

- HTML/CSS/JS å„å¸å…¶èŒ
- åº”å½“é¿å…ä¸å¿…è¦çš„ç”± JS ç›´æ¥æ“ä½œæ ·å¼
- å¯ä»¥ç”¨ class æ¥è¡¨ç¤ºçŠ¶æ€
- çº¯å±•ç¤ºç±»äº¤äº’å¯»æ±‚é›¶ JS æ–¹æ¡ˆ

### ç»„ä»¶å°è£…

ç»„ä»¶æ˜¯æŒ‡ Web ç•Œé¢ä¸ŠæŠ½å‡ºæ¥ä¸€ä¸ªä¸ªåŒ…å«æ¨¡æ¿ï¼ˆHTMLï¼‰ã€åŠŸèƒ½ï¼ˆJSï¼‰å’Œæ ·å¼ï¼ˆCSSï¼‰çš„å•å…ƒã€‚

å¥½çš„ç»„ä»¶å…·å¤‡**å°è£…æ€§ã€æ­£ç¡®æ€§ã€æ‰©å±•æ€§ã€å¤ç”¨æ€§**ã€‚

**ä¸¾ä¾‹è¯´æ˜ï¼š**ç”¨åŸç”Ÿ JS å†™ä¸€ä¸ªç”µå•†ç½‘ç«™çš„è½®æ’­å›¾

- ç»“æ„è®¾è®¡ï¼šHTMLï¼Œè½®æ’­å›¾æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ—è¡¨ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ— åºåˆ—è¡¨ `<ul>` å…ƒç´ æ¥å®ç°
- å±•ç¤ºæ•ˆæœï¼šCSS

  - ä½¿ç”¨ CSS ç»å¯¹å®šä½å°†å›¾ç‰‡é‡å åœ¨åŒä¸€ä¸ªä½ç½®
  - è½®æ’­å›¾åˆ‡æ¢çš„çŠ¶æ€ä½¿ç”¨ä¿®é¥°ç¬¦(modifier)
  - è½®æ’­å›¾çš„åˆ‡æ¢åŠ¨ç”»ä½¿ç”¨ CSS transition
- è¡Œä¸ºè®¾è®¡ï¼šAPI

  - API è®¾è®¡åº”ä¿è¯åŸå­æ“ä½œï¼ŒèŒè´£å•ä¸€ï¼Œæ»¡è¶³çµæ´»æ€§ã€‚
  - getSelectedItem()
  - getSelectedItemIndex()
  - slideTo()
  - slideNext()
  - slidePrevious()
- è¡Œä¸ºè®¾è®¡ï¼šæ§åˆ¶æµ

  - ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶æ¥è§£è€¦
- ä»£ç å®ç°ï¼š

  - Version Oneï¼š API çš„ç®€å•å®ç°

```html
<div id="my-slider" class="slider-list">
  <ul>
    <li class="slider-list__item--selected">
      <img src="https://p5.ssl.qhimg.com/t0119c74624763dd070.png"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg"/>
    </li>
  </ul>
</div>
```

```css
#my-slider{
  position: relative;
  width: 790px;
}

.slider-list ul{
  list-style-type:none;
  position: relative;
  padding: 0;
  margin: 0;
}

.slider-list__item,
.slider-list__item--selected{
  position: absolute;
  transition: opacity 1s;
  opacity: 0;
  text-align: center;
}

.slider-list__item--selected{
  transition: opacity 1s;
  opacity: 1;
}
```

```javascript
class Slider{
  constructor(id){
    this.container = document.getElementById(id);
    this.items = this.container
    .querySelectorAll('.slider-list__item, .slider-list__item--selected');
  }
  getSelectedItem(){
    const selected = this.container
      .querySelector('.slider-list__item--selected');
    return selected
  }
  getSelectedItemIndex(){
    return Array.from(this.items).indexOf(this.getSelectedItem());
  }
  slideTo(idx){
    const selected = this.getSelectedItem();
    if(selected){ 
      selected.className = 'slider-list__item';
    }
    const item = this.items[idx];
    if(item){
      item.className = 'slider-list__item--selected';
    }
  }
  slideNext(){
    const currentIdx = this.getSelectedItemIndex();
    const nextIdx = (currentIdx + 1) % this.items.length;
    this.slideTo(nextIdx);
  }
  slidePrevious(){
    const currentIdx = this.getSelectedItemIndex();
    const previousIdx = (this.items.length + currentIdx - 1)
      % this.items.length;
    this.slideTo(previousIdx);  
  }
}

const slider = new Slider('my-slider');
slider.slideTo(3);
```

- Version Twoï¼šæ§åˆ¶æµ

```html
<div id="my-slider" class="slider-list">
  <ul>
    <li class="slider-list__item--selected">
      <img src="https://p5.ssl.qhimg.com/t0119c74624763dd070.png"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg"/>
    </li>
  </ul>
  <a class="slide-list__next"></a>
  <a class="slide-list__previous"></a>
  <div class="slide-list__control">
    <span class="slide-list__control-buttons--selected"></span>
    <span class="slide-list__control-buttons"></span>
    <span class="slide-list__control-buttons"></span>
    <span class="slide-list__control-buttons"></span>
  </div>
</div>
```

```css
#my-slider{
  position: relative;
  width: 790px;
  height: 340px;
}

.slider-list ul{
  list-style-type:none;
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
}

.slider-list__item,
.slider-list__item--selected{
  position: absolute;
  transition: opacity 1s;
  opacity: 0;
  text-align: center;
}

.slider-list__item--selected{
  transition: opacity 1s;
  opacity: 1;
}

.slide-list__control{
  position: relative;
  display: table;
  background-color: rgba(255, 255, 255, 0.5);
  padding: 5px;
  border-radius: 12px;
  bottom: 30px;
  margin: auto;
}

.slide-list__next,
.slide-list__previous{
  display: inline-block;
  position: absolute;
  top: 50%;
  margin-top: -25px;
  width: 30px;
  height:50px;
  text-align: center;
  font-size: 24px;
  line-height: 50px;
  overflow: hidden;
  border: none;
  background: transparent;
  color: white;
  background: rgba(0,0,0,0.2);
  cursor: pointer;
  opacity: 0;
  transition: opacity .5s;
}

.slide-list__previous {
  left: 0;
}

.slide-list__next {
  right: 0;
}

#my-slider:hover .slide-list__previous {
  opacity: 1;
}


#my-slider:hover .slide-list__next {
  opacity: 1;
}

.slide-list__previous:after {
  content: '<';
}

.slide-list__next:after {
  content: '>';
}

.slide-list__control-buttons,
.slide-list__control-buttons--selected{
  display: inline-block;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  margin: 0 5px;
  background-color: white;
  cursor: pointer;
}

.slide-list__control-buttons--selected {
  background-color: red;
}
```

```javascript
class Slider{
  constructor(id, cycle = 3000){
    this.container = document.getElementById(id);
    this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected');
    this.cycle = cycle;

    const controller = this.container.querySelector('.slide-list__control');
    if(controller){
      const buttons = controller.querySelectorAll('.slide-list__control-buttons, .slide-list__control-buttons--selected');

      controller.addEventListener('mouseover', evt=>{
        const idx = Array.from(buttons).indexOf(evt.target);
        if (idx >= 0) {
          this.slideTo(idx);
          this.stop();
        } 
      });

      controller.addEventListener('mouseout', evt=>{
        this.start();
      });

      this.container.addEventListener('slide', evt=>{
        const idx = evt.detail.index;
        const selected = controller.querySelector('.slide-list__control-buttons--selected');
        if(selected) selected.className = 'slide-list__control-buttons';
        buttons[idx].className = 'slide-list__control-buttons--selected';
      });

      const previous = this.container.querySelector('.slide-list__previous');
      if (previous){
        previous.addEventListener('click', evt=>{
          this.stop();
          this.slidePrevious();
          this.start();
          evt.preventDefault()
        });
      }
    }
    
    const next = this.container.querySelector('.slide-list__next');
    if (next){
      next.addEventListener('click', evt => {
        this.stop();
        this.slideNext();
        this.start();
        evt.preventDefault();
      });
    }

  }

  getSelectedItem(){
    const selected = this.container.querySelector('.slider-list__item--selected');
    return selected
  }

  getSelectedItemIndex(){
    return Array.from(this.items).indexOf(this.getSelectedItem());
  }

  slideTo(idx) {
    const selected = this.getSelectedItem();
    if (selected) selected.className = 'slider-list__item';
    const item = this.items[idx];
    if (item) item.className = 'slider-list__item--selected';

    const detail = {index: idx};
    const event = new CustomEvent('slide', {bubbles: true, detail});
    this.container.dispatchEvent(event);
  }

  slideNext(){
    const currentIdx = this.getSelectedItemIndex();
    const nextIdx = (currentIdx + 1) % this.items.length;
    this.slideTo(nextIdx);
  }

  slidePrevious(){
    const currentIdx = this.getSelectedItemIndex();
    const previousIdx = (currentIdx - 1 + this.items.length) % this.items.length;
    this.slideTo(previousIdx);
  }

  start(){
    this.stop();
    // è¿™é‡Œä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼ˆ()=>{}ï¼‰ï¼Œç®­å¤´å‡½æ•°ä¸­çš„thisç»‘å®šåˆ°å®ƒè¢«åˆ›å»ºçš„ä¸Šä¸‹æ–‡ï¼Œé€šå¸¸æ˜¯å®šä¹‰å®ƒçš„å¯¹è±¡ï¼Œè¿™é‡Œçš„thiså°†ç»‘å®šåˆ°å½“å‰å¯¹è±¡ä¸Šã€‚æ‰€ä»¥ï¼Œæ¯å½“setIntervalè§¦å‘æ—¶ï¼Œå°†ä¼šè°ƒç”¨this.slideNext()æ–¹æ³•ã€‚
    this._timer = setInterval(()=>this.slideNext(), this.cycle);

    // è¿™é‡Œç›´æ¥è°ƒç”¨äº†this.slideNext()æ–¹æ³•ï¼Œå¹¶ä¸”å°†å…¶è¿”å›å€¼ä¼ é€’ç»™setIntervalã€‚ç”±äºsetIntervaléœ€è¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œè¿™ä¸ªè¯­å¥å¹¶ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œã€‚å®é™…ä¸Šï¼Œè¿™ä¼šç«‹å³è°ƒç”¨this.slideNext()æ–¹æ³•ï¼Œå¹¶å°†è¿”å›å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä¼ é€’ç»™setIntervalï¼Œè€Œä¸æ˜¯åœ¨å®šæ—¶é—´éš”è§¦å‘æ—¶è°ƒç”¨è¯¥æ–¹æ³•ã€‚
    // æ­£ç¡®çš„å†™æ³•æ˜¯ç¬¬ä¸€æ¡è¯­å¥ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°ç¡®ä¿åœ¨å®šæ—¶é—´éš”å†…è°ƒç”¨this.slideNext()æ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨åˆ›å»ºå®šæ—¶å™¨æ—¶å°±ç«‹å³è°ƒç”¨å®ƒã€‚
    // this._timer = setInterval(this.slideNext(), this.cycle);
  }
  stop(){
    clearInterval(this._timer);
  }

}

const slider = new Slider('my-slider');
slider.start();
```

> `=>` æ˜¯ç®­å¤´å‡½æ•°ï¼ˆArrow Functionï¼‰çš„è¯­æ³•ã€‚å®ƒæ˜¯ ES6ï¼ˆECMAScript 2015ï¼‰ä¸­å¼•å…¥çš„ä¸€ç§æ–°çš„å‡½æ•°å®šä¹‰æ–¹å¼ï¼Œç”¨äºç®€åŒ–å‡½æ•°çš„å£°æ˜å’Œç¼–å†™ã€‚
> ç®­å¤´å‡½æ•°æœ‰ä¸¤ç§å½¢å¼ï¼š
>
> 1. å•å‚æ•°ã€å•è¯­å¥çš„ç®­å¤´å‡½æ•°ï¼š
>
> ```scss
> ```

scssCopy code
(param) => statement;

```
> 1. å¤šå‚æ•°ã€å¤šè¯­å¥çš„ç®­å¤´å‡½æ•°ï¼š
> ```scss
scssCopy code
(param1, param2, ...) => {
  // multiple statements
};
```

> ç®­å¤´å‡½æ•°ç›¸æ¯”ä¼ ç»Ÿå‡½æ•°è¡¨è¾¾å¼å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
>
> 1. ç®€æ´ï¼šç”±äºè¯­æ³•ç®€æ´ï¼Œé€šå¸¸åœ¨åªæœ‰ä¸€ä¸ªå‚æ•°å’Œå•ä¸ªè¡¨è¾¾å¼çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œå¯ä»¥è®©ä»£ç æ›´åŠ ç´§å‡‘ã€‚
> 2. æ²¡æœ‰ `this` ç»‘å®šï¼šç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ `this` ç»‘å®šï¼Œè€Œæ˜¯ç»§æ‰¿å¤–éƒ¨ä½œç”¨åŸŸçš„ `this`ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†ä¼ ç»Ÿå‡½æ•°ä¸­ `this` ä½œç”¨åŸŸé—®é¢˜ã€‚
> 3. æ²¡æœ‰ `arguments` å¯¹è±¡ï¼šç®­å¤´å‡½æ•°ä¹Ÿæ²¡æœ‰è‡ªå·±çš„ `arguments` å¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿å¤–éƒ¨å‡½æ•°çš„ `arguments` å¯¹è±¡ã€‚
>    ç®­å¤´å‡½æ•°çš„ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºï¼š
>
> - ç®€åŒ–å›è°ƒå‡½æ•°çš„å®šä¹‰ã€‚
> - ä½œä¸ºç®€å•å‡½æ•°çš„å¿«æ·æ–¹å¼ã€‚
> - åœ¨éœ€è¦ä¿ç•™å¤–éƒ¨ä½œç”¨åŸŸçš„ `this` æ—¶ä½¿ç”¨ï¼Œé¿å… `this` æŒ‡å‘å‡ºç°é—®é¢˜ã€‚
>   éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ `this` å’Œ `arguments` å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿå‡½æ•°å¯èƒ½æ›´é€‚åˆï¼Œç‰¹åˆ«æ˜¯éœ€è¦åŠ¨æ€ç»‘å®š `this` æˆ–è®¿é—® `arguments` å¯¹è±¡æ—¶ã€‚

### è¿‡ç¨‹æŠ½è±¡

- ç”¨æ¥å¤„ç†å±€éƒ¨ç»†èŠ‚æ§åˆ¶çš„ä¸€äº›æ–¹æ³•
- å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³çš„åŸºç¡€åº”ç”¨

**é«˜é˜¶å‡½æ•°**

Once

- æ“ä½œæ¬¡æ•°é™åˆ¶
  - ä¸€äº›å¼‚æ­¥äº¤äº’
  - ä¸€æ¬¡æ€§çš„ HTTP è¯·æ±‚
    ä¸ºäº†èƒ½å¤Ÿè®©â€œåªæ‰§è¡Œä¸€æ¬¡â€çš„éœ€æ±‚è¦†ç›–ä¸åŒçš„äº‹ä»¶å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªéœ€æ±‚å‰¥ç¦»å¤„ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º**è¿‡ç¨‹æŠ½è±¡**ã€‚
    åƒè¿™æ ·çš„å‡½æ•°ä¹Ÿç§°ä¸º**é«˜é˜¶å‡½æ•°**ã€‚
    é«˜é˜¶å‡½æ•°
    å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°æœ‰ï¼š
    ![](static/W9V0bWLcjoOsrRxXodOcQU2hnCb.png)

![](static/B2XdbkpvMoTg6BxF7h3cdTKWnDf.png)
![](static/YlUcb5hN8o1cICxN3bCcpM3Gnld.png)

```javascript
// è®© fn å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡
function once(fn) {
    return function (...args) {
        if (fn) {
            const ret = fn.apply(this, args)
            fn = null
            return ret;
        }
    };
}

// è®© fn å‡½æ•°åœ¨ time å†…åªèƒ½æ‰§è¡Œä¸€æ¬¡
function throttle(fn, time = 500) {
    let timer;
    return function (...args) {
        if (timer == null) {
            fn.apply(this, args);
            timer = setTimeout(() => {
                timer = null;
            }, time)
        }
    }
}

// å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼›å¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ã€‚
function debounce(fn, dur) {
    dur = dur || 100;
    var timer;
    return function () {
        clearTimeout(timer);
        timer = setTimeout(() => {
            fn.apply(this, arguments);
        }, dur);
    }
}

// æ¯éš” time æ—¶é—´è°ƒç”¨ fn, å®ç°ä¸€ä¸ª delay è°ƒç”¨
function consumer(fn, time) {
    let tasks = [],
        timer;

    return function (...args) {
        tasks.push(fn.bind(this, ...args));
        if (timer == null) {
            timer = setInterval(() => {
                tasks.shift().call(this)
                if (tasks.length <= 0) {
                    clearInterval(timer);
                    timer = null;
                }
            }, time)
        }
    }
}

// å¯¹å¯è¿­ä»£å¯¹è±¡æ‰¹é‡æ“ä½œ
const isIterable = obj => obj != null && typeof obj[Symbol.iterator] === 'function';
function iterative(fn) {
    return function (subject, ...rest) {
        if (isIterable(subject)) {
            const ret = [];
            for (let obj of subject) {
                ret.push(fn.apply(this, [obj, ...rest]));
            }
            return ret;
        }
        return fn.apply(this, [subject, ...rest]);
    }
}
```

throttle Example

```html
æ¯500æ¯«ç§’å¯è®°å½•ä¸€æ¬¡

<button id="btn">ç‚¹æˆ‘</button>

<div id="circle">0</div>
```

```css
#circle {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: red;
  line-height: 50px;
  text-align: center;
  color: white;
  opacity: 1.0;
  transition: opacity .25s;
}

#circle.fade {
  opacity: 0.0;
  transition: opacity .25s;
}
```

```javascript
function throttle(fn, time = 500){
  let timer;
  return function(...args){
    if(timer == null){
      fn.apply(this,  args);
      timer = setTimeout(() => {
        timer = null;
      }, time)
    }
  }
}

btn.onclick = throttle(function(e){
  circle.innerHTML = parseInt(circle.innerHTML) + 1;
  circle.className = 'fade';
  setTimeout(() => circle.className = '', 250);
});
```

Debounce Example:

```html
<script src="https://s1.qhres2.com/!bd39e7fb/animator-0.2.0.min.js"></script>
<div id="bird" class="sprite bird1"></div>
```

```css
html, body {
  margin:0;
  padding:0;
}

.sprite {
  display:inline-block; overflow:hidden; 
  background-repeat: no-repeat;
  background-image:url(https://p1.ssl.qhimg.com/d/inn/0f86ff2a/8PQEganHkhynPxk-CUyDcJEk.png);
}

.bird0 {width:86px; height:60px; background-position: -178px -2px}
.bird1 {width:86px; height:60px; background-position: -90px -2px}
.bird2 {width:86px; height:60px; background-position: -2px -2px}

#bird{
  position: absolute;
  left: 100px;
  top: 100px;
  transform: scale(0.5);
  transform-origin: -50% -50%;
}
```

```javascript
var i = 0;
setInterval(function(){
  bird.className = "sprite " + 'bird' + ((i++) % 3);
}, 1000/10);

function debounce(fn, dur){
  dur = dur || 100;
  var timer;
  return function(){
    clearTimeout(timer);
    timer = setTimeout(() => {
      fn.apply(this, arguments);
    }, dur);
  }
}

document.addEventListener('mousemove', debounce(function(evt){
  var x = evt.clientX,
      y = evt.clientY,
      x0 = bird.offsetLeft,
      y0 = bird.offsetTop;
  
  console.log(x, y);
  
  var a1 = new Animator(1000, function(ep){
    bird.style.top = y0 + ep * (y - y0) + 'px';
    bird.style.left = x0 + ep * (x - x0) + 'px';
  }, p => p * p);
  
  a1.animate();
}, 100));
```

Consumer Example:

```html
<div id="main">
  <button id="btn">Hit</button>
  <span id="count">+0</span>
</div>
```

```css
#main {
  padding-top: 20px;
  font-size: 26px;
}

#btn {
  font-size: 30px;
  border-radius: 15px;
  border: solid 3px #fa0;
}

#count {
  position: absolute;
  margin-left: 6px;
  opacity: 1.0;
  transform: translate(0, 10px);
}

#count.hit {
  opacity: 0.1;
  transform: translate(0, -20px);
  transition: all .5s;
}
```

```javascript
function consumer(fn, time){
  let tasks = [],
      timer;
  
  return function(...args){
    tasks.push(fn.bind(this, ...args));
    if(timer == null){
      timer = setInterval(() => {
        tasks.shift().call(this)
        if(tasks.length <= 0){
          clearInterval(timer);
          timer = null;
        }
      }, time)
    }
  }
}

btn.onclick = consumer((evt)=>{
  let t = parseInt(count.innerHTML.slice(1)) + 1;
  count.innerHTML = `+${t}`;
  count.className = 'hit';
  let r = t * 7 % 256,
      g = t * 17 % 128,
      b = t * 31 % 128;
  
  count.style.color = `rgb(${r},${g},${b})`.trim();
  setTimeout(()=>{
    count.className = 'hide';
  }, 500);
}, 800)
```

Iterative Example:

```html
<ul>
  <li>a</li>
  <li>b</li>
  <li>c</li>
  <li>d</li>
  <li>e</li>
  <li>f</li>
  <li>g</li>
</ul>
```

```javascript
const isIterable = obj => obj != null 
  && typeof obj[Symbol.iterator] === 'function';

function iterative(fn) {
  return function(subject, ...rest) {
    if(isIterable(subject)) {
      const ret = [];
      for(let obj of subject) {
        ret.push(fn.apply(this, [obj, ...rest]));
      }
      return ret;
    }
    return fn.apply(this, [subject, ...rest]);
  }
}

const setColor = iterative((el, color) => {
  el.style.color = color;
});

const els = document.querySelectorAll('li:nth-child(2n+1)');
setColor(els, 'red');
```

### ç¼–ç¨‹èŒƒå¼

æ­¤å¤„ä¸ºå‘½ä»¤å¼ä¸å£°æ˜å¼ï¼Œå‘½ä»¤å¼å¼ºè°ƒ `How to do` è€Œå£°æ˜å¼å¼ºè°ƒ `What to do`ï¼Œæ‰€ä»¥å‘½ä»¤å¼ä¸å¯é¿å…çš„æ¯”å£°æ˜å¼å¤æ‚ã€‚

![](static/AETybVaYco76nJx0LW4cZT7Qnfg.png)
![](static/FUirbrrRsohVIMxCKJrcKSpJnkm.png)

![](static/KW2XbjTmNo2NpRxxwn0cIauAnVE.png)
![](static/L5vzbdma6oyECVxa4kvceXtCnJg.png)

**Toggle Exampleï¼š**

```html
<div id="switcher" class="on"></div>
```

```css
#switcher {
  display: inline-block;
  background-color: black;
  width: 50px;
  height: 50px;
  line-height: 50px;
  border-radius: 50%;
  text-align: center;
  cursor: pointer;
}

#switcher.on {
  background-color: green;
}

#switcher.off {
  background-color: red;
}

#switcher.on:after {
  content: 'on';
  color: white;
}

#switcher.off:after {
  content: 'off';
  color: white;
}
```

- å‘½ä»¤å¼

```javascript
switcher.onclick = function(evt){
  if(evt.target.className === 'on'){
    evt.target.className = 'off';
  }else{
    evt.target.className = 'on';
  }
}
```

- å£°æ˜å¼

```javascript
function toggle(...actions){
  return function(...args){
    let action = actions.shift();
    actions.push(action);
    return action.apply(this, args);
  }
}

switcher.onclick = toggle(
  evt => evt.target.className = 'off',
  evt => evt.target.className = 'on'
);
```

> è™½ç„¶çœ‹èµ·æ¥å£°æ˜å¼çš„ä»£ç æ›´åŠ é•¿ï¼Œä½†æ˜¯å£°æ˜å¼çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤

ä¾‹å¦‚ï¼Œä¸º Toggle æ·»åŠ ä¸€ä¸ªçŠ¶æ€

```css
#switcher {
  display: inline-block;
  background-color: black;
  width: 50px;
  height: 50px;
  line-height: 50px;
  border-radius: 50%;
  text-align: center;
  cursor: pointer;
}

#switcher.on {
  background-color: green;
}

#switcher.warn {
  background-color: yellow;
}

#switcher.off {
  background-color: red;
}

#switcher.on:after {
  content: 'on';
  color: white;
}

#switcher.warn:after {
  content: 'warn';
  color: black;
}

#switcher.off:after {
  content: 'off';
  color: white;
}
```

å£°æ˜å¼åªéœ€æ·»åŠ ä¸€è¡Œ

```javascript
function toggle(...actions){
  return function(...args){
    let action = actions.shift();
    actions.push(action);
    return action.apply(this, args);
  }
}

switcher.onclick = toggle(
  evt => evt.target.className = 'warn',
  evt => evt.target.className = 'off',
  evt => evt.target.className = 'on'
);
```

è€Œå‘½ä»¤å¼éœ€è¦ else if çš„é€»è¾‘åˆ¤æ–­

## Lesson 5 æ·±å…¥æµ…å‡º TypeScript

## Lesson 6 Web æ ‡å‡†ä¸å‰ç«¯å¼€å‘

## Lesson 7 HTTP å®ç”¨æŒ‡å—

VideoLink:

1. [åˆè¯† HTTP åè®® - æ˜é‡‘](https://juejin.cn/course/bytetech/7169405808147431455/section/7169430296574558216)
2. [HTTP åè®®çš„åº”ç”¨åœºæ™¯åˆ†æ - æ˜é‡‘](https://juejin.cn/course/bytetech/7169405808147431455/section/7169464204594937893)
3. [HTTP åè®®å®æˆ˜åˆ†æ - æ˜é‡‘](https://juejin.cn/course/bytetech/7169405808147431455/section/7168791819554127908)

[HTTP å®ç”¨æŒ‡å—.pptx](https://bytedance.feishu.cn/file/boxcnUFzZ8jMkS9P3735PsXjINk)

### åˆè¯† HTTP

![](static/ULVCbGJCeoKG4bxDCVtclsxknmh.png)
![](static/NvJjbuHekoIVb3xaWXjcH8FSnXg.png)

- Hyper Text Transfer Protocol è¶…æ–‡æœ¬ä¼ è¾“åè®®
- åº”ç”¨å±‚åè®®ï¼ŒåŸºäº TCP åè®®
- è¯·æ±‚å“åº”
- ç®€å•å¯æ‰©å±•ï¼šå¯¹äº C/Sï¼Œå¯ä»¥æ·»åŠ åŒæ–¹çº¦å®šçš„ Key-Value
- æ— çŠ¶æ€ï¼šæ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„

![](static/T6S9bfHF0ooWfjxAimIcIdzPntL.png)
![](static/DkucbgvjhoDlQkxbGDXcA3ZYn3b.png)
![](static/QhXhbRF2Ooe1oLxntamc5xFGnDd.png)

### åè®®åˆ†æ

#### HTTP åè®®çš„å‘å±•

![](static/Nd6ObUCEpojGqcxrwwHcDpSRnJg.png)

#### HTTP åè®®æŠ¥æ–‡

ä»¥ HTTP/1.1 ä¸ºä¾‹

![](static/UcpCb3aWnoJWisxkQy5ccMjbn9e.png)

##### Method

<table>
<tr>
<td>GET<br/></td><td>è¯·æ±‚ä¸€ä¸ªæŒ‡å®šèµ„æºçš„è¡¨ç¤ºå½¢å¼.ä½¿ç”¨GETçš„è¯·æ±‚åº”è¯¥åªè¢«ç”¨äºè·å–æ•°æ®<br/></td></tr>
<tr>
<td>POST<br/></td><td>ç”¨äºå°†å®ä½“æäº¤åˆ°æŒ‡å®šçš„èµ„æºï¼Œé€šå¸¸å¯¼è‡´åœ¨æœåŠ¡å™¨ä¸Šçš„çŠ¶æ€å˜åŒ–æˆ–å‰¯ä½œç”¨<br/></td></tr>
<tr>
<td>PUT<br/></td><td>ç”¨è¯·æ±‚æœ‰æ•ˆè½½è·æ›¿æ¢ç›®æ ‡èµ„æºçš„æ‰€æœ‰å½“å‰è¡¨ç¤º<br/></td></tr>
<tr>
<td>DELETE<br/></td><td>åˆ é™¤æŒ‡å®šçš„èµ„æº<br/></td></tr>
<tr>
<td>HEAD<br/></td><td>è¯·æ±‚ä¸€ä¸ªä¸GETè¯·æ±‚çš„å“åº”ç›¸åŒçš„å“åº”ï¼Œä½†æ²¡æœ‰å“åº”ä½“<br/></td></tr>
<tr>
<td>CONNECT<br/></td><td>å»ºç«‹ä¸€ä¸ªåˆ°ç”±ç›®æ ‡èµ„æºæ ‡è¯†çš„æœåŠ¡å™¨çš„éš§é“<br/></td></tr>
<tr>
<td>OPTIONS<br/></td><td>ç”¨äºæè¿°ç›®æ ‡èµ„æºçš„é€šä¿¡é€‰é¡¹<br/></td></tr>
<tr>
<td>TRACE<br/></td><td>æ²¿ç€åˆ°ç›®æ ‡èµ„æºçš„è·¯å¾„æ‰§è¡Œä¸€ä¸ªæ¶ˆæ¯ç¯å›æµ‹è¯•<br/></td></tr>
<tr>
<td>PATCH<br/></td><td>ç”¨äºå¯¹èµ„æºåº”ç”¨éƒ¨åˆ†ä¿®æ”¹<br/></td></tr>
</table>

Safe (å®‰å…¨çš„) : ä¸ä¼šä¿®æ”¹æœåŠ¡å™¨çš„æ•°æ®çš„æ–¹æ³•ã€‚

ldempotent ï¼ˆå¹‚ç­‰ï¼‰:åŒæ ·çš„è¯·æ±‚è¢«æ‰§è¡Œä¸€æ¬¡ä¸è¿ç»­æ‰§è¡Œå¤šæ¬¡çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒæœåŠ¡å™¨çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

##### çŠ¶æ€ç 

![](static/GSgQb98hNo63fmxTKuJcSyX5n7b.png)

- 200 0K- å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ
- 301- èµ„æº (ç½‘é¡µç­‰) è¢«æ°¸ä¹…è½¬ç§»åˆ°å…¶å®ƒ URL
- 302-ä¸´æ—¶è·³è½¬
- 401 Unauthorized - è¯·æ±‚æœªç»æˆæƒ
- 404- è¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œå¯èƒ½æ˜¯è¾“å…¥äº†é”™è¯¯çš„ URL
- 500-æœåŠ¡å™¨å†…éƒ¨å‘ç”Ÿäº†ä¸å¯é¢„æœŸçš„é”™è¯¯
- 504 Gateway Timeout-ç½‘å…³æˆ–è€…ä»£ç†çš„æœåŠ¡å™¨æ— æ³•åœ¨è§„å®šçš„æ—¶é—´å†…è·å¾—æƒ³è¦çš„å“åº”

##### RESTful API

ä¸€ç§ API è®¾è®¡é£æ ¼ã€‚REST - Representational State Transfer

- æ¯ä¸€ä¸ª URI ä»£è¡¨ä¸€ç§èµ„æº:
- å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œä¼ é€’è¿™ç§èµ„æºçš„æŸç§è¡¨ç°å±‚
- å®¢æˆ·ç«¯é€šè¿‡ HTTP methodï¼Œå¯¹æœåŠ¡å™¨ç«¯èµ„æºè¿›è¡Œæ“ä½œï¼Œå®ç°â€œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€

<table>
<tr>
<td>è¯·æ±‚<br/></td><td>è¿”å›ç <br/></td><td>å«ä¹‰<br/></td></tr>
<tr>
<td>GET /zoos<br/></td><td>200 OK<br/></td><td>åˆ—å‡ºæ‰€æœ‰åŠ¨ç‰©å›­ï¼ŒæœåŠ¡å™¨æˆåŠŸè¿”å›äº†<br/></td></tr>
<tr>
<td>POST /zoos<br/></td><td>201 CREATED<br/></td><td>æ–°å»ºä¸€ä¸ªåŠ¨ç‰©å›­ï¼ŒæœåŠ¡å™¨åˆ›å»ºæˆåŠŸ<br/>æ›´æ–°æŸä¸ªæŒ‡å®šåŠ¨ç‰©å›­çš„ä¿¡æ¯ (æä¾›è¯¥åŠ¨<br/></td></tr>
<tr>
<td>PUT /zoos/ID<br/></td><td>400 INVALID REQUEST<br/></td><td>æ›´æ–°æŸä¸ªæŒ‡å®šåŠ¨ç‰©å›­çš„ä¿¡æ¯ (æä¾›è¯¥åŠ¨ç‰©å›­çš„å…¨éƒ¨ä¿¡æ¯)ç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œ<br/></td></tr>
<tr>
<td>DELETE /zoos/ID<br/></td><td>204 NO CONTENT<br/></td><td>åˆ é™¤æŸä¸ªåŠ¨ç‰©å›­ï¼Œåˆ é™¤æ•°æ®æˆåŠŸ<br/></td></tr>
</table>

##### å¸¸ç”¨è¯·æ±‚å¤´

<table>
<tr>
<td>Accept<br/></td><td>æ¥æ”¶ç±»å‹ï¼Œè¡¨ç¤ºæµè§ˆå™¨æ”¯æŒçš„MIMEç±»å‹ (å¯¹æ ‡æœåŠ¡ç«¯è¿”å›çš„Content-Typeï¼‰<br/></td></tr>
<tr>
<td>Content-Type<br/></td><td>å®¢æˆ·ç«¯å‘é€å‡ºå»å®ä½“å†…å®¹çš„ç±»å‹<br/></td></tr>
<tr>
<td>Cache-Control<br/></td><td>æŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶ï¼Œå¦‚nocache<br/></td></tr>
<tr>
<td>If-Modified-Since<br/></td><td>å¯¹åº”æœåŠ¡ç«¯çš„Last-Modifiedï¼Œç”¨æ¥åŒ¹é…çœ‹æ–‡ä»¶æ˜¯å¦å˜åŠ¨ï¼Œåªèƒ½ç²¾ç¡®åˆ°1sä¹‹å†…<br/></td></tr>
<tr>
<td>Expires<br/></td><td>ç¼“å­˜æ§åˆ¶ï¼Œåœ¨è¿™ä¸ªæ—¶é—´å†…ä¸ä¼šè¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼ŒæœåŠ¡ç«¯æ—¶é—´<br/></td></tr>
<tr>
<td>Max-age<br/></td><td>ä»£è¡¨èµ„æºåœ¨æœ¬åœ°ç¼“å­˜å¤šå°‘ç§’ï¼Œæœ‰æ•ˆæ—¶é—´å†…ä¸ä¼šè¯·æ±‚ï¼Œè€Œæ˜¯ä½¿ç”¨ç¼“å­˜<br/></td></tr>
<tr>
<td>If-None-Match<br/></td><td>å¯¹åº”æœåŠ¡ç«¯çš„ETagï¼Œç”¨æ¥åŒ¹é…æ–‡ä»¶å†…å®¹æ˜¯å¦æ”¹å˜ (éå¸¸ç²¾ç¡®)<br/></td></tr>
<tr>
<td>Cookie<br/></td><td>æœ‰cookieå¹¶ä¸”åŒåŸŸè®¿é—®æ—¶ä¼šè‡ªåŠ¨å¸¦ä¸Š<br/></td></tr>
<tr>
<td>Referer<br/></td><td>è¯¥é¡µé¢çš„æ¥æºURL(é€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„è¯·æ±‚ï¼Œä¼šç²¾ç¡®åˆ°è¯¦ç»†é¡µé¢åœ°å€ï¼Œcsrfæ‹¦æˆªå¸¸ç”¨åˆ°è¿™ä¸ªå­—æ®µ)<br/></td></tr>
<tr>
<td>Origin<br/></td><td>æœ€åˆçš„è¯·æ±‚æ˜¯ä»å“ªé‡Œå‘èµ·çš„ (åªä¼šç²¾ç¡®åˆ°ç«¯å£),Originæ¯”Refereræ›´å°Šé‡éšç§<br/></td></tr>
<tr>
<td>User-Agent<br/></td><td>ç”¨æˆ·å®¢æˆ·ç«¯çš„ä¸€äº›å¿…è¦ä¿¡æ¯ï¼Œå¦‚UAå¤´éƒ¨ç­‰<br/></td></tr>
</table>

##### å¸¸ç”¨å“åº”å¤´

<table>
<tr>
<td>Content-Type<br/></td><td>æœåŠ¡ç«¯è¿”å›çš„å®ä½“å†…å®¹çš„ç±»å‹<br/></td></tr>
<tr>
<td>Cache-Control<br/></td><td>æŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶ï¼Œå¦‚no-cache<br/></td></tr>
<tr>
<td>Last-Modified<br/></td><td>è¯·æ±‚èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´<br/></td></tr>
<tr>
<td>Expires<br/></td><td>åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è®¤ä¸ºæ–‡æ¡£å·²ç»è¿‡æœŸ,ä»è€Œä¸å†ç¼“å­˜å®ƒ<br/></td></tr>
<tr>
<td>Max-age<br/></td><td>å®¢æˆ·ç«¯çš„æœ¬åœ°èµ„æºåº”è¯¥ç¼“å­˜å¤šå°‘ç§’ï¼Œå¼€å¯äº†Cache-Controlåæœ‰æ•ˆ<br/></td></tr>
<tr>
<td>ETag<br/></td><td>èµ„æºçš„ç‰¹å®šç‰ˆæœ¬çš„æ ‡è¯†ç¬¦ï¼ŒEtagsç±»ä¼¼äºæŒ‡çº¹<br/></td></tr>
<tr>
<td>Set-Cookie<br/></td><td>è®¾ç½®å’Œé¡µé¢å…³è”çš„cookieï¼ŒæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªå¤´éƒ¨æŠŠcookieä¼ ç»™å®¢æˆ·ç«¯<br/></td></tr>
<tr>
<td>Server<br/></td><td>æœåŠ¡å™¨çš„ä¸€äº›ç›¸å…³ä¿¡æ¯<br/></td></tr>
<tr>
<td>Access-Control-Allow-Origin<br/></td><td>æœåŠ¡å™¨ç«¯å…è®¸çš„è¯·æ±‚Originå¤´éƒ¨ (è­¦å¦‚ä¸º*)<br/></td></tr>
</table>

##### ç¼“å­˜

- å¼ºç¼“å­˜

  - Expires æ—¶é—´æˆ³
  - Cache-Controlï¼ˆå¯èƒ½ä¸å…¨é¢ï¼‰
    - å¯ç¼“å­˜æ€§
      - no-cacheï¼šåå•†ç¼“å­˜éªŒè¯
      - no-storeï¼šä¸ä½¿ç”¨ä»»ä½•ç¼“å­˜
    - åˆ°æœŸ
      - max-ageï¼šå•ä½æ˜¯ç§’ï¼Œå­˜å‚¨çš„æœ€å¤§å‘¨æœŸï¼Œç›¸å¯¹äºè¯·æ±‚çš„æ—¶é—´
    - é‡æ–°éªŒè¯ é‡æ–°åŠ è½½
      - must-revalidateï¼šä¸€æ—¦èµ„æºè¿‡æœŸï¼Œåœ¨æˆåŠŸå‘åŸå§‹æœåŠ¡å™¨éªŒè¯ä¹‹å‰ï¼Œä¸èƒ½ä½¿ç”¨
- åå•†ç¼“å­˜

  - Etag/If-None-Matchï¼šèµ„æºçš„ç‰¹å®šç‰ˆæœ¬çš„æ ‡è¯†ç¬¦ï¼Œç±»ä¼¼äºæŒ‡çº¹
  - Last-Modified/If-Modified-Sinceï¼šæœ€åä¿®æ”¹æ—¶é—´

![](static/PyzjbiuLwoFAubxihVOcGgeYnId.png)

##### Cookie

set-Cookie --Response

<table>
<tr>
<td>Name=Value<br/></td><td>å„ç§ Cookie çš„åç§°å’Œå€¼<br/></td></tr>
<tr>
<td>Expires=Date<br/></td><td>Cookie çš„æœ‰æ•ˆæœŸï¼Œç¼ºçœæ—¶Cookie ä»…åœ¨æµè§ˆå™¨å…³é—­ä¹‹å‰æœ‰æ•ˆã€‚<br/></td></tr>
<tr>
<td>Path=Path<br/></td><td>é™åˆ¶æŒ‡å®šCookie çš„å‘é€èŒƒå›´çš„æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤ä¸ºå½“å‰<br/></td></tr>
<tr>
<td>Domain=Domain<br/></td><td>é™åˆ¶cookieç”Ÿæ•ˆçš„åŸŸåï¼Œé»˜è®¤ä¸ºåˆ›å»ºcookieçš„æœåŠ¡åŸŸå<br/></td></tr>
<tr>
<td>secure<br/></td><td>ä»…åœ¨HTTPS å®‰å…¨è¿æ¥æ—¶ï¼Œæ‰å¯ä»¥å‘é€Cookie<br/></td></tr>
<tr>
<td>HttpOnly<br/></td><td>JavaScript è„šæœ¬æ— æ³•è·å¾—Cookie<br/></td></tr>
<tr>
<td>SameSite=[None | Strict | Lax]<br/></td><td>- None åŒç«™ã€è·¨ç«™è¯·æ±‚éƒ½å¯å‘é€<br/>- Strict ä»…åœ¨åŒç«™å‘é€<br/>- å…è®¸ä¸é¡¶çº§å¯¼èˆªä¸€èµ·å‘é€ï¼Œå¹¶å°†ä¸ç¬¬ä¸‰æ–¹ç½‘ç«™å‘èµ·çš„GETè¯·æ±‚ä¸€èµ·å‘é€<br/></td></tr>
</table>

##### HTTP/2 æ¦‚è¿°

- æ›´å¿«ï¼Œæ›´ç¨³å®šï¼Œæ›´ç®€å•
- **å¸§ (frame) **: HTTP/2 é€šä¿¡çš„æœ€å°å•ä½æ¯ä¸ªå¸§éƒ½åŒ…å«å¸§å¤´ï¼Œè‡³å°‘ä¹Ÿä¼šæ ‡è¯†å‡ºå½“å‰å¸§æ‰€å±çš„æ•°æ®æµã€‚
  ![](static/MU31bmqjGoldPoxc7zFchk6hnRh.png)
- **æ¶ˆæ¯**ï¼šä¸é€»è¾‘è¯·æ±‚æˆ–å“åº”æ¶ˆæ¯å¯¹åº”çš„å®Œæ•´çš„ä¸€ç³»åˆ—å¸§ã€‚
- **æ•°æ®æµ**ï¼šå·²å»ºç«‹çš„è¿æ¥å†…çš„åŒå‘å­—èŠ‚æµå¯ä»¥æ‰¿è½½ä¸€æ¡æˆ–å¤šæ¡æ¶ˆæ¯ã€‚
  ![](static/EV1Pb0PIsoOxTQxlMm3cbxzRn1c.png)
  äº¤é”™å‘é€ï¼Œæ¥æ”¶æ–¹é‡ç»„ç»‡
- HTTP/2 è¿æ¥éƒ½æ˜¯æ°¸ä¹…çš„ï¼Œè€Œä¸”ä»…éœ€è¦æ¯ä¸ªæ¥æºä¸€ä¸ªè¿æ¥
- **æµæ§åˆ¶**ï¼šé˜»æ­¢å‘é€æ–¹å‘æ¥æ”¶æ–¹å‘é€å¤§é‡æ•°æ®çš„æœºåˆ¶
- **æœåŠ¡å™¨æ¨é€**ï¼šåœ¨å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œé™„å¸¦æ¨é€ç»™å®¢æˆ·ç«¯ä¸€äº›æ–‡ä»¶ï¼ˆåº”ç”¨è¾ƒå°‘ï¼‰
  ![](static/TbQfb4Y7Jo3NMsxcnQIcyXGpnnh.png)

##### HTTPS æ¦‚è¿°

- HTTPS: Hypertext Transfer Protocol Secure
- ç»è¿‡ TSL/SSL åŠ å¯†
- å¯¹ç§°åŠ å¯†: åŠ å¯†å’Œè§£å¯†éƒ½æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥
- éå¯¹ç§°åŠ å¯†ï¼ŒåŠ å¯†å’Œè§£å¯†éœ€è¦ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„å¯†é’¥: å…¬é’¥ (public key)å’Œç§é’¥ (private key)
  ![](static/LYcub2zqzokN1nxHxwQcQRDWnQf.png)

![](static/Cnnubg1bboMf8OxiG2Rcddjfnpe.png)
![](static/QGRzbrMo5oq0VIxshNJctFq2nqK.png)

### åœºæ™¯åˆ†æ

#### é™æ€èµ„æº

![](static/FbrybG7C6oPshkxDZIZczhLsnsb.png)
çŠ¶æ€ç  200 ä¸ä¸€å®šæ˜¯å‘é€äº†è¯·æ±‚ï¼Œå¦‚å›¾æ˜¯ä»ç£ç›˜ç¼“å­˜
![](static/Mx3yb3UxFolGcWx02Wkc46JYn3e.png)
![](static/N7JAbo568oXub9xwm2Ic9szGngb.png)
![](static/FdCUb76pVoRgdnx7sXRcIAuenNg.png)
![](static/KKLrbG2H3ojse5x4tsXclM0jn6f.png)
å¯ä»¥å¾—åˆ°ä¸€äº›ä¿¡æ¯

- å¼ºç¼“å­˜
- Cache-Controlï¼š1Year
- è¿è¡Œæ‰€æœ‰åŸŸåè®¿é—®
- èµ„æºç±»å‹ï¼šCSS

é™æ€èµ„æºæ–¹æ¡ˆï¼šç¼“å­˜ + CDN + æ–‡ä»¶å Hash

- CDNï¼šContent Delivery Network
- é€šè¿‡ç”¨æˆ·å°±è¿‘æ€§å’ŒæœåŠ¡å™¨è´Ÿè½½çš„åˆ¤æ–­ï¼ŒCDN ç¡®ä¿å†…å®¹ä»¥ä¸€ç§æä¸ºé«˜æ•ˆçš„æ–¹å¼ä¸ºç”¨æˆ·çš„è¯·æ±‚æä¾›æœåŠ¡
  ![](static/W2GlbVXUnoWpbxxdceycigwunee.png)

#### ç™»å½•

##### åŸŸ Origin

![](static/RaLlbsQhboWtewx18vVcXlrInJg.png)

##### è·¨åŸŸ

- CORSï¼ˆCross-Origin Resource Sharingï¼‰
- é¢„è¯·æ±‚: è·çŸ¥æœåŠ¡ç«¯æ˜¯å¦å…è®¸è¯¥è·¨æºè¯·æ±‚ (å¤æ‚è¯·æ±‚)
- ç›¸å…³åè®®å¤´

  - Access-Control-Allow-Origin
  - Access-Control-Expose-Headers
  - Access-Control-Max-Age
  - Access-Control-Allow-Credentials
  - Access-Control-Allow-Methods
  - Access-Control-Allow-Headers
  - Access-Control-Request-Method
  - Access-Control-Request-Headers
  - Origin
    ![](static/IivebCuTroTPGpxedUScRwc7nbc.png)
    Preflight requestï¼šå‘æœåŠ¡å™¨å‘é€ Option è¯·æ±‚è¿™ç§è¯·æ±‚æ˜¯å¦å¯ä»¥è·¨åˆ°æŸåŸŸ
    Main requestï¼šå‘é€çœŸæ­£çš„è¯·æ±‚
- è·¨åŸŸè§£å†³æ–¹æ¡ˆ

  - CORS
  - ä»£ç†æœåŠ¡å™¨ï¼šåŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œä¸æ˜¯ HTTP çš„
  - Iframeï¼šè¯¸å¤šä¸ä¾¿
- é‰´æƒ

  - Session + Cookie
  - JWTï¼ˆJSON Web Tokenï¼‰

![](static/S9jbbOl3Jof9Xtxj7iFcAMdpnAg.png)
![](static/Ldk7bRft5ohcPKxQamacdTiBnjc.png)

> é€‚åˆä½¿ç”¨ jwt çš„åœºæ™¯ï¼š

1. æœ‰æ•ˆæœŸçŸ­
2. åªå¸Œæœ›è¢«ä½¿ç”¨ä¸€æ¬¡
   æ¯”å¦‚ï¼Œç”¨æˆ·æ³¨å†Œåå‘ä¸€å°é‚®ä»¶è®©å…¶æ¿€æ´»è´¦æˆ·ï¼Œé€šå¸¸é‚®ä»¶ä¸­éœ€è¦æœ‰ä¸€ä¸ªé“¾æ¥ï¼Œè¿™ä¸ªé“¾æ¥éœ€è¦å…·å¤‡ä»¥ä¸‹çš„ç‰¹æ€§ï¼šèƒ½å¤Ÿæ ‡è¯†ç”¨æˆ·ï¼Œè¯¥é“¾æ¥å…·æœ‰æ—¶æ•ˆæ€§ï¼ˆé€šå¸¸åªå…è®¸å‡ å°æ—¶ä¹‹å†…æ¿€æ´»ï¼‰ï¼Œä¸èƒ½è¢«ç¯¡æ”¹ä»¥æ¿€æ´»å…¶ä»–å¯èƒ½çš„è´¦æˆ·ï¼Œä¸€æ¬¡æ€§çš„ã€‚è¿™ç§åœºæ™¯å°±é€‚åˆä½¿ç”¨ jwtã€‚
   è€Œç”±äº jwt å…·æœ‰ä¸€æ¬¡æ€§çš„ç‰¹æ€§ã€‚å•ç‚¹ç™»å½•å’Œä¼šè¯ç®¡ç†éå¸¸ä¸é€‚åˆç”¨ jwtï¼Œå¦‚æœåœ¨æœåŠ¡ç«¯éƒ¨ç½²é¢å¤–çš„é€»è¾‘å­˜å‚¨ jwt çš„çŠ¶æ€ï¼Œé‚£è¿˜ä¸å¦‚ä½¿ç”¨ sessionã€‚åŸºäº session æœ‰å¾ˆå¤šæˆç†Ÿçš„æ¡†æ¶å¯ä»¥å¼€ç®±å³ç”¨ï¼Œä½†æ˜¯ç”¨ jwt è¿˜è¦è‡ªå·±å®ç°é€»è¾‘ã€‚

- SSOï¼šå•ç‚¹ç™»å½•ï¼ˆSingle Sign Onï¼‰

![](static/UNNKbsaYxoCCb9x2j1jcWqxTnHf.png)

### å®æˆ˜

#### æµè§ˆå™¨ç«¯

##### AJAX ä¹‹ XHR

- XHRï¼šXMLHttpRequest
- readyState

<table>
<tr>
<td>0<br/></td><td>UNSENT<br/></td><td>ä»£ç†è¢«åˆ›å»ºï¼Œä½†å°šæœªè°ƒç”¨open() æ–¹æ³•ã€‚<br/></td></tr>
<tr>
<td>1<br/></td><td>OPENED<br/></td><td>open() æ–¹æ³•å·²ç»è¢«è°ƒç”¨ã€‚<br/></td></tr>
<tr>
<td>2<br/></td><td>HEADERS RECEIVED<br/></td><td>send() æ–¹æ³•å·²ç»è¢«è°ƒç”¨å¹¶ä¸”å¤´éƒ¨å’ŒçŠ¶æ€å·²ç»å¯è·å¾—<br/></td></tr>
<tr>
<td>3<br/></td><td>LOADING<br/></td><td>ä¸‹è½½ä¸­; responseText å±æ€§å·²ç»åŒ…å«éƒ¨åˆ†æ•°æ®<br/></td></tr>
<tr>
<td>4<br/></td><td>DONE<br/></td><td>ä¸‹è½½æ“ä½œå·²å®Œæˆã€‚<br/></td></tr>
</table>
![](static/Sq60bzlFlou708xLcXuculYYnBf.png)

##### AJAX ä¹‹ Fetch

- XMLHttpRequet çš„å‡çº§ç‰ˆ
- ä½¿ç”¨ Promise
- æ¨¡å—åŒ–è®¾è®¡ï¼ŒResponseã€Requestã€Header å¯¹è±¡
- é€šè¿‡æ•°æ®æµå¤„ç†å¯¹è±¡ï¼Œæ”¯æŒåˆ†å—è¯»å–
  ![](static/JUcgbvAxmooGKSx8FlSc4ll0nr1.png)

#### Node ç«¯

æ ‡å‡†åº“ HTTP/HTTPS

- é»˜è®¤æ¨¡å—ï¼Œæ— éœ€å®‰è£…å…¶ä»–ä¾èµ–
- åŠŸèƒ½æœ‰é™/ä¸æ˜¯ååˆ†å‹å¥½
  ![](static/L9adbJAVaoR6TFx2lmPco9kcndh.png)

å¸¸ç”¨è¯·æ±‚åº“ï¼šaxios

- æ”¯æŒæµè§ˆå™¨ã€nodejs ç¯å¢ƒ
- ä¸°å¯Œçš„æ‹¦æˆªå™¨
  ![](static/Kc19bzU5wotWIrxYkuocyPCNnPb.png)

#### ç”¨æˆ·ä½“éªŒâ€”â€”ç½‘ç»œä¼˜åŒ–

![](static/UR37b0TBqoQUB0xzRaCcv6fNnCf.png)

- CDN æ˜¯å¦å¼€å¯ H2 çš„æ€§èƒ½å¯¹æ¯” [HTTP/2 - A Real-World Performance Test and Analysis | CSS-Tricks](https://css-tricks.com/http2-real-world-performance-test-analysis/)
  ![](static/OkiybnQVAoFRWQxsULUcRhNnn8f.png)
- é¢„è§£æã€é¢„è¿æ¥
  ![](static/T4JkbIb48oq62zxOWZIcdr2yn7c.png)

![](static/XXGCb7nIJobPpnxidZjctyE4neG.png)

- é‡è¯•æ˜¯ä¿è¯ç¨³å®šæ€§çš„æœ‰æ•ˆæ‰‹æ®µï¼Œä½†è¦é˜²æ­¢åŠ å‰§æ¶åŠ£æƒ…å†µ
- ç¼“å­˜åˆç†ä½¿ç”¨ï¼Œä½œä¸ºæœ€åä¸€é“é˜²çº¿

### äº†è§£æ›´å¤š

#### WebSocket

- æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œå…¨åŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯
- å…¸å‹åœºæ™¯ï¼šå®æ—¶æ€§è¦æ±‚é«˜ï¼Œä¾‹å¦‚èŠå¤©å®¤
- URL ä½¿ç”¨ ws:// æˆ– wss:// å¼€å¤´

![](static/QKWnb9uCBoXm8AxZFELcB8NpnGe.png)

#### QUIC

- Quick UDP Internet Connection
- 0-RTT å»ºè”ï¼ˆé¦–æ¬¡å»ºè”é™¤å¤–ï¼‰
- ç±»ä¼¼ TCP çš„å¯é ä¼ è¾“
- ç±»ä¼¼ TLS çš„åŠ å¯†ä¼ è¾“ã€‚æ”¯æŒå®Œç¾å‰å‘å®‰å…¨
- ç”¨æˆ·ç©ºé—´çš„æ‹¥å¡æ§åˆ¶ï¼Œæœ€æ–°çš„ BBR ç®—æ³•
- æ”¯æŒ h2 çš„åŸºäºæµçš„å¤šè·¯å¤ç”¨ï¼Œä½†æ²¡æœ‰ TCP çš„ HOL é—®é¢˜
- å‰å‘çº é”™ FEC
- ç±»ä¼¼ MPTCP çš„ Connection Migration
  ![](static/BgAebNbCjojJOoxyTjycRc4EnsZ.png)
  ![](static/SHLqbzD6RowJPUxIcCScXxkdndd.png)

## Lesson 10 å“åº”å¼ç³»ç»Ÿä¸ React

VideoLinkï¼š

1. [React çš„å†å²ä¸åº”ç”¨ - æ˜é‡‘](https://juejin.cn/course/bytetech/7180922988034785336/section/7181287649443840061)
2. [React çš„è®¾è®¡æ€è·¯ - æ˜é‡‘](https://juejin.cn/course/bytetech/7180922988034785336/section/7181297907503464509)
3. [React (hooks)çš„å†™æ³•ä¸ React å®ç° - æ˜é‡‘](https://juejin.cn/course/bytetech/7180922988034785336/section/7181298684229845053)
4. [React çŠ¶æ€ç®¡ç†åº“ä¸åº”ç”¨çº§æ¡†æ¶ç§‘æ™® - æ˜é‡‘](https://juejin.cn/course/bytetech/7180922988034785336/section/7181301644058067001)

CoursewareLinkï¼š[å“åº”å¼ç¼–ç¨‹ä¸ React.pptx](https://bytedance.feishu.cn/file/boxcnGwsB2WwY2HZAp1XHvpnhoq)

### React å†å²ä¸åº”ç”¨

åº”ç”¨

- å‰ç«¯åº”ç”¨å¼€å‘ï¼Œå¦‚ Facebookï¼Œ Instagramï¼Œ Netflix ç½‘é¡µç‰ˆã€‚
- ç§»åŠ¨åŸç”Ÿåº”ç”¨å¼€å‘ï¼Œå¦‚ Instagramï¼ŒDiscordï¼ŒOculusã€‚
- ç»“åˆ Electronï¼Œè¿›è¡Œæ¡Œé¢åº”ç”¨å¼€å‘ã€‚

å†å²

- 2010 å¹´ Facebook åœ¨å…¶ php ç”Ÿæ€ä¸­ï¼Œå¼•å…¥äº† xhp æ¡†æ¶ï¼Œé¦–æ¬¡å¼•å…¥äº†ç»„åˆå¼ç»„ä»¶çš„æ€æƒ³ï¼Œå¯å‘äº†åæ¥çš„ React çš„è®¾è®¡ã€‚
- 2011 å¹´ Jordan Walke åˆ›é€ äº† FaxJSï¼Œä¹Ÿå°±æ˜¯åæ¥ React åŸå‹ï¼š

![](static/WDoKbV0xqoGFJcxV0rTc3YMqnEh.png)

- 2012 å¹´ åœ¨ Facebook æ”¶è´­ Instagram åï¼Œè¯¥ FaxJS é¡¹ç›®åœ¨å†…éƒ¨å¾—åˆ°ä½¿ç”¨ï¼ŒJordan Walke åŸºäº FaxJS çš„ç»éªŒï¼Œåˆ›é€ äº† Reactã€‚
- 2013 å¹´ React æ­£å¼å¼€æºï¼Œåœ¨ 2013 JSConf ä¸Š Jordan Walke ä»‹ç»äº†è¿™æ¬¾å…¨æ–°çš„æ¡†æ¶
- 2014 å¹´ ç”Ÿæ€å¤§çˆ†å‘ï¼Œå„ç§å›´ç»• React çš„æ–°å·¥å…·/æ–°æ¡†æ¶å¼€å§‹æ¶Œç°ï¼š

### React çš„è®¾è®¡æ€è·¯

#### UI ç¼–ç¨‹ç—›ç‚¹

1. çŠ¶æ€æ›´æ–°ï¼ŒUI ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨åœ°è°ƒç”¨ DOM è¿›è¡Œæ›´æ–°ã€‚
2. æ¬ ç¼ºåŸºæœ¬åœ°ä»£ç å±‚é¢çš„å°è£…å’Œéš”ç¦»ï¼Œä»£ç å±‚é¢æ²¡æœ‰ç»„ä»¶åŒ–ã€‚
3. UI ä¹‹é—´çš„æ•°æ®ä¾èµ–å…³ç³»ï¼Œéœ€è¦æ‰‹åŠ¨ç»´æŠ¤ï¼Œå¦‚æœä¾èµ–é“¾è·¯é•¿ï¼Œåˆ™ä¼šé‡åˆ° "Callback Hell"

#### å“åº”å¼ä¸è½¬æ¢å¼

- è½¬æ¢å¼ï¼šç»™å®š **è¾“å…¥** æ±‚è§£ **è¾“å‡º**ã€‚ä¾‹å¦‚ç¼–è¯‘å™¨ï¼Œæ•°å€¼è®¡ç®—
- å“åº”å¼ï¼šç›‘å¬äº‹ä»¶ï¼Œæ¶ˆæ¯é©±åŠ¨ã€‚ä¾‹å¦‚ç›‘æ§ç³»ç»Ÿï¼ŒUI ç•Œé¢

  - äº‹ä»¶ --> æ‰§è¡Œæ—¢å®šçš„å›è°ƒ --> çŠ¶æ€å˜æ›´

#### React çš„è§£å†³

1. çŠ¶æ€æ›´æ–°ï¼ŒUI è‡ªåŠ¨æ›´æ–°
2. å‰ç«¯ä»£ç ç»„ä»¶åŒ–ï¼Œå¯å¤ç”¨ï¼Œå¯å°è£…
3. çŠ¶æ€ä¹‹é—´çš„äº’ç›¸ä¾èµ–å…³ç³»ï¼Œåªéœ€è¦å£°æ˜å³å¯

#### ç»„ä»¶åŒ–

1. ç»„ä»¶æ˜¯ç»„å»ºçš„ç»„åˆ/åŸå­ç»„ä»¶
2. ç»„ä»¶å†…æ‹¥æœ‰çŠ¶æ€ï¼Œå¤–éƒ¨ä¸å¯è§
3. çˆ¶ç»„ä»¶å¯å°†çŠ¶æ€ä¼ å…¥ç»„ä»¶å†…éƒ¨

#### çŠ¶æ€å½’å±é—®é¢˜

1. React æ˜¯å•å‘æ•°æ®æµï¼Œçˆ¶ç»„ä»¶ä¼ å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡æ‰§è¡Œå‡½æ•°æ¥å½±å“ä¸Šå±‚ç»„ä»¶ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šè¿˜æ˜¯**å•å‘æ•°æ®æµ**
2. è§£å†³çŠ¶æ€ä¸åˆç†ä¸Šå‡çš„é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨**çŠ¶æ€ç®¡ç†åº“**ï¼Œä½†è¿‡å¤šä½¿ç”¨ä¼šå½±å“å¤ç”¨

#### ç»„ä»¶è®¾è®¡

1. ç»„ä»¶å£°æ˜äº†çŠ¶æ€å’Œ UI çš„æ˜ å°„
2. ç»„ä»¶æœ‰ Props/State ä¸¤ç§çŠ¶æ€
3. â€œç»„ä»¶â€å¯ç”±å…¶ä»–ç»„ä»¶æ‹¼è£…è€Œæˆ

#### ç»„ä»¶ä»£ç 

1. ç»„ä»¶å†…éƒ¨æ‹¥æœ‰è‡ªç”±çŠ¶æ€ State
2. ç»„ä»¶æ¥å—å¤–éƒ¨çš„ Props çŠ¶æ€æä¾›å¤ç”¨æ€§
3. æ ¹æ®å½“å‰çš„ State/Propsï¼Œè¿”å›ä¸€ä¸ª UI

#### å£°æ˜å‘¨æœŸ

![](static/VcGmbaWV4ofTSQxnwTMcOt1Znsc.png)

### React (hooks) çš„å†™æ³•

`React.useState` æ˜¯ React JavaScript åº“ä¸­çš„ä¸€ä¸ªé’©å­ï¼ˆhookï¼‰ï¼Œå…è®¸æ‚¨åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ï¼ˆstateï¼‰ã€‚åœ¨å¼•å…¥é’©å­ä¹‹å‰ï¼ŒçŠ¶æ€åªèƒ½é€šè¿‡ä½¿ç”¨ `this.state` æœºåˆ¶åœ¨ç±»ç»„ä»¶ä¸­è¿›è¡Œç®¡ç†ã€‚åƒ `useState` è¿™æ ·çš„é’©å­è¢«å¼•å…¥ï¼Œä»¥ä¾¿åœ¨å‡½æ•°å¼ç»„ä»¶å†…æ›´è½»æ¾åœ°ç®¡ç†ç»„ä»¶çŠ¶æ€å’Œå…¶ä»–è¡Œä¸ºã€‚

`useState` é’©å­è¿”å›ä¸€ä¸ªå¸¦æœ‰çŠ¶æ€å€¼å’Œæ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚å®ƒæ¥å—ä¸€ä¸ªåˆå§‹å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼šå½“å‰çŠ¶æ€å€¼å’Œä¸€ä¸ªæ›´æ–°è¯¥å€¼çš„å‡½æ•°ã€‚

```javascript
import React, { useState } from 'react';

function ExampleComponent() {
  // ä½¿ç”¨åˆå§‹å€¼ 0 å£°æ˜ä¸€ä¸ªåä¸º "count" çš„çŠ¶æ€å˜é‡
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
    </div>
  );
}
```

`React.useEffect` æ˜¯ React JavaScript åº“ä¸­çš„å¦ä¸€ä¸ªé’©å­ï¼ˆhookï¼‰ï¼Œç”¨äºå¤„ç†å‰¯ä½œç”¨æ“ä½œï¼Œæ¯”å¦‚æ•°æ®è·å–ã€è®¢é˜…ã€æ‰‹åŠ¨ DOM æ“ä½œç­‰ã€‚åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œç”±äºæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆå¦‚ `componentDidMount` å’Œ `componentDidUpdate`ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `useEffect` æ¥å¤„ç†ç»„ä»¶æ¸²æŸ“å‘¨æœŸä¸­çš„å‰¯ä½œç”¨ã€‚

`useEffect` æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯å‰¯ä½œç”¨å‡½æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºæŒ‡å®šå½±å“å‰¯ä½œç”¨æ‰§è¡Œçš„ä¾èµ–é¡¹ã€‚å½“ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå‰¯ä½œç”¨å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœæŒ‡å®šäº†ä¾èµ–é¡¹æ•°ç»„ï¼Œåˆ™å½“æ•°ç»„ä¸­çš„ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå‰¯ä½œç”¨å‡½æ•°ä¼šè¢«é‡æ–°è°ƒç”¨ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šä¾èµ–é¡¹æ•°ç»„ï¼Œå‰¯ä½œç”¨å‡½æ•°ä¼šåœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½è¢«è°ƒç”¨ã€‚

```javascript
import React, { useState, useEffect } from 'react';

function ExampleComponent() {
  const [count, setCount] = useState(0);

  // ä½¿ç”¨ useEffect å¤„ç†å‰¯ä½œç”¨
  useEffect(() => {
    document.title = `Count: ${count}`;
  }, [count]); // ä»…åœ¨ count å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
    </div>
  );
}
```

### React çš„å®ç°

#### Problems

1. JSX ä¸ç¬¦åˆ JS æ ‡å‡†è¯­æ³•
2. è¿”å›çš„ JSX å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¦‚ä½•æ›´æ–° DOM
3. State/Props æ›´æ–°æ—¶ï¼Œè¦é‡æ–°è§¦å‘ render å‡½æ•°

> ä»¥ä¸‹å‡ä¸ºè§£å†³æ–¹æ³•

#### JSX -> JS

![](static/B9ZtbGugUoUV7Nxdbh6caoArnZe.png)

#### Virtual DOM

Virtual DOM æ˜¯ä¸€ç§ç”¨äºå’ŒçœŸå® DOM åŒæ­¥ï¼Œè€Œåœ¨ JS å†…å­˜ä¸­ç»´æŠ¤çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå…·æœ‰å’Œ DOM ç±»ä¼¼çš„æ ‘çŠ¶ç»“æ„ï¼Œå¹¶å’Œ DOM å¯ä»¥å»ºç«‹ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚

> DOM ä¸æ˜¯åœ¨ JS å†…å­˜ä¸­ï¼Œè€Œæ˜¯åœ¨æµè§ˆå™¨ä¸­

å®ƒèµ‹äºˆäº† React å£°æ˜å¼çš„ API: æ‚¨å‘Šè¯‰ React å¸Œæœ›è®© UI æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼ŒReact å°±ç¡®ä¿ DOM åŒ¹é…è¯¥çŠ¶æ€ã€‚è¿™ä½¿æ‚¨å¯ä»¥ä»å±æ€§æ“ä½œã€äº‹ä»¶å¤„ç†å’Œæ‰‹åŠ¨ DOM æ›´æ–°è¿™äº›åœ¨æ„å»ºåº”ç”¨ç¨‹åºæ—¶å¿…è¦çš„æ“ä½œä¸­è§£æ”¾å‡ºæ¥ã€‚

#### Update DOM

![](static/FKx0bA9aFoK17qxBhHwc2WdUnoe.png)

#### How to diff?

- A tradeoff between update times and calculation speed
- å®Œç¾çš„æœ€å° diff ç®—æ³•ï¼Œéœ€è¦$O(n^3)$çš„æ—¶é—´å¤æ‚åº¦
- ç‰ºç‰²ç†è®ºæœ€å° diffï¼Œæ¢å–æ—¶é—´ï¼Œå¾—åˆ°äº†$O(n)$å¤æ‚åº¦çš„ç®—æ³•â€”â€” Heuristic O(n) Algorithm

<table>
<tr>
<td>ä¸åŒç±»å‹çš„å…ƒç´ <br/></td><td>æ›¿æ¢<br/></td></tr>
<tr>
<td>åŒç±»å‹çš„ DOM å…ƒç´ <br/></td><td>æ›´æ–°<br/></td></tr>
<tr>
<td>åŒç±»å‹çš„ç»„ä»¶å…ƒç´ <br/></td><td>é€’å½’<br/></td></tr>
</table>

### React çŠ¶æ€ç®¡ç†åº“

![](static/VpNqb9pRnolCzVx4c9ac6Mmln3d.png)

å°†çŠ¶æ€æŠ½ç¦»åˆ° UI å¤–éƒ¨è¿›è¡Œç»Ÿä¸€ç®¡ç†

[Redux ä¸­æ–‡æ–‡æ¡£ Â· Redux](https://www.redux.org.cn/)

[XState - JavaScript State Machines and Statecharts](https://xstate.js.org/)

[å…³äº MobX | MobX ä¸­æ–‡æ–‡æ¡£ | MobX ä¸­æ–‡ç½‘](https://www.mobxjs.com/)

[Recoil - React çŠ¶æ€ç®¡ç†åº“](https://recoiljs.org/zh-hans/)

### åº”ç”¨çº§æ¡†æ¶ç§‘æ™®

#### Next.js

ç¡…è°·æ˜æ˜Ÿåˆ›ä¸šå…¬å¸ Vercel çš„ React å¼€å‘æ¡†æ¶ï¼Œç¨³å®šï¼Œå¼€å‘ä½“éªŒå¥½,æ”¯æŒ Unbundled Devï¼Œswc ç­‰å…¶åŒæ ·æœ‰ serverless ä¸€é”®éƒ¨ç½²å¹³å°å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®Œæˆéƒ¨ç½²ã€‚å£å·æ˜¯"Let's Make web Faster"

#### Modern.js

å­—èŠ‚è·³åŠ¨ web infra å›¢é˜Ÿç ”å‘çš„å…¨æ ˆå¼€å‘æ¡†æ¶ï¼Œå†…ç½®äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„èƒ½åŠ›ä¸æœ€ä½³å®è·µï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šè°ƒç ”é€‰æ‹©å·¥å…·çš„æ—¶é—´

#### Blitz

æ—  API æ€æƒ³çš„å…¨æ ˆå¼€å‘æ¡†æ¶ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ— éœ€å†™ API è°ƒç”¨ä¸ CRUD é€»è¾‘ï¼Œé€‚åˆå‰åç«¯ç´§å¯†ç»“åˆçš„å°å›¢é˜Ÿé¡¹ç›®ã€‚

![](static/PX4gb5LVLoUlBBx1HhscTE6unWg.png)

![](static/WtrHb2S46oLbhUxURYNckSVvnMg.png)
![](static/RKKqbU9dZon7ZIxsUDmczTwVn0d.png)

## Lesson 11 Vite çŸ¥è¯†ä½“ç³»

### æµ…è°ˆæ„å»ºå·¥å…·

- å‰ç«¯æ ¸å¿ƒè¦ç´ ï¼šèµ„æº

  - JSã€ TSã€JSX
  - CSSã€SCSSã€LESS
  - PNGã€JPEGã€WEBP
- æ¨¡å—åŒ–ï¼šESMã€CommonJSã€UMD

  - æä¾›æ¨¡å—åŠ è½½æ–¹æ¡ˆ
  - å…¼å®¹ä¸åŒæ¨¡å—è§„èŒƒ
- èµ„æºç¼–è¯‘ï¼šé«˜çº§è¯­æ³•çš„ç¼–è¯‘

  - é«˜çº§è¯­æ³•è½¬è¯‘ï¼Œå¦‚ Sass, TypeScript
  - èµ„æºåŠ è½½ï¼Œå¦‚å›¾ç‰‡ã€å­—ä½“ã€worker
- äº§ç‰©è´¨é‡ï¼šä»£ç ä½“ç§¯ã€ä»£ç æ€§èƒ½

  - äº§ç‰©å‹ç¼©ã€æ— ç”¨ä»£ç åˆ é™¤ã€è¯­æ³•é™çº§
- å¼€å‘æ•ˆç‡ï¼šçƒ­æ›´æ–°

### Vite æ¦‚è¦ä»‹ç»

- å®šä½ï¼šæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- ä¸¤å¤§ç»„æˆéƒ¨åˆ†

  - No-bundle å¼€å‘æœåŠ¡ï¼Œæºæ–‡ä»¶æ— éœ€æ‰“åŒ…
  - ç”Ÿäº§ç¯å¢ƒåŸºäº Rollup çš„ Bundler
- æ ¸å¿ƒç‰¹å¾

  - é«˜æ€§èƒ½ï¼Œdev å¯åŠ¨é€Ÿåº¦å’Œçƒ­æ›´æ–°é€Ÿåº¦éå¸¸å¿«
  - ç®€å•æ˜“ç”¨ï¼Œå¼€å‘è€…ä½“éªŒå¥½

#### å½“ä¸‹é—®é¢˜

- ç¼“æ…¢çš„å¯åŠ¨ -> é¡¹ç›®ç¼–è¯‘ç­‰å¾…æˆæœ¬é«˜
- ç¼“æ…¢çš„çƒ­æ›´æ–° -> ä¿®æ”¹ä»£ç åä¸èƒ½å®æ—¶æ›´æ–°
- Bundle å¸¦æ¥çš„æ€§èƒ½å¼€é”€
- Javascript è¯­è¨€çš„æ€§èƒ½ç“¶é¢ˆ

#### ESM

- å…¨çƒæµè§ˆå™¨å¯¹åŸç”Ÿ ESM çš„æ™®éæ”¯æŒ(ç›®å‰å æ¯” 92% ä»¥ä¸Š)

  - Script æ ‡ç­¾å¢åŠ  type="module" å±æ€§
  - ä½¿ç”¨ ESM æ¨¡å—å¯¼å…¥å¯¼å‡ºè¯­æ³•
- åŸºäºåŸç”Ÿè¯­è¨€(Goã€Rust)ç¼–å†™å‰ç«¯ç¼–è¯‘å·¥å…·é“¾
- å¦‚ Go è¯­è¨€ç¼–å†™çš„ Esbuildã€ Rust ç¼–å†™çš„ SWC
- åŸºäºåŸç”Ÿ ESM çš„å¼€å‘æœåŠ¡ä¼˜åŠ¿

  - æ— éœ€æ‰“åŒ…é¡¹ç›®æºä»£ç 
  - å¤©ç„¶çš„æŒ‰éœ€åŠ è½½
  - å¯ä»¥åˆ©ç”¨æ–‡ä»¶çº§çš„æµè§ˆå™¨ç¼“å­˜

![](static/BIDMbHCK6oP2mixwytdcNPUbnlh.png)

ESM æ˜¯ ECMAScript æ¨¡å—çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§åœ¨ JavaScript ä¸­ç”¨äºç»„ç»‡ã€å¯¼å…¥å’Œå¯¼å‡ºä»£ç çš„æ¨¡å—åŒ–ç³»ç»Ÿã€‚å®ƒåœ¨ ECMAScript 2015ï¼ˆES6ï¼‰è§„èŒƒä¸­å¼•å…¥ï¼Œæ—¨åœ¨æ”¹è¿›ä¼ ç»Ÿçš„è„šæœ¬åŠ è½½æ–¹å¼ï¼Œå¹¶æä¾›æ›´å¥½çš„ä»£ç ç»„ç»‡å’Œé‡ç”¨æœºåˆ¶ã€‚

ESM å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. æ¨¡å—åŒ–å¯¼å…¥å’Œå¯¼å‡ºï¼š ä½¿ç”¨ `import` å…³é”®å­—ä»ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å…¥å‡½æ•°ã€å˜é‡æˆ–å¯¹è±¡ï¼Œä½¿ç”¨ `export` å…³é”®å­—å°†è¿™äº›å†…å®¹æš´éœ²ç»™å…¶ä»–æ¨¡å—ã€‚
2. é™æ€è§£æï¼š ESM çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯åœ¨ä»£ç è§£æé˜¶æ®µå¤„ç†çš„ï¼Œè¿™æ„å‘³ç€å¯¼å…¥çš„æ¨¡å—è·¯å¾„å¿…é¡»æ˜¯é™æ€çš„ï¼Œä¸èƒ½ä¾èµ–äºè¿è¡Œæ—¶çš„æ¡ä»¶ã€‚
3. å»¶è¿ŸåŠ è½½ï¼š æ¨¡å—åœ¨ç¬¬ä¸€æ¬¡è¢«å¯¼å…¥æ—¶æ‰ä¼šåŠ è½½ï¼Œè¿™æœ‰åŠ©äºæé«˜æ€§èƒ½ï¼Œå› ä¸ºåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šåŠ è½½æ‰€éœ€çš„æ¨¡å—ã€‚
4. ä½œç”¨åŸŸéš”ç¦»ï¼š æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œæ¨¡å—ä¸­çš„å˜é‡ä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸæˆ–å…¶ä»–æ¨¡å—çš„ä½œç”¨åŸŸã€‚
5. å¾ªç¯ä¾èµ–å¤„ç†ï¼š ESM æ”¯æŒè§£å†³æ¨¡å—ä¹‹é—´çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œç¡®ä¿æ¨¡å—åŠ è½½çš„é¡ºåºä¸ä¼šå¯¼è‡´æ­»å¾ªç¯ã€‚
6. é»˜è®¤å¯¼å‡ºå’Œå‘½åå¯¼å‡ºï¼š å¯ä»¥ä½¿ç”¨ `export default` æ¥æŒ‡å®šé»˜è®¤å¯¼å‡ºå†…å®¹ï¼Œä»¥åŠä½¿ç”¨å‘½åå¯¼å‡ºæ¥æš´éœ²å¤šä¸ªå†…å®¹ã€‚

#### åŸºäº ES build çš„ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–

ES build â€”â€” åŸºäº Golang å¼€å‘çš„å‰ç«¯å·¥å…·ï¼Œå…·å¤‡å¦‚ä¸‹èƒ½åŠ›

- æ‰“åŒ…å™¨ Bundler
- ç¼–è¯‘å™¨ Transformer
- å‹ç¼©å™¨ Minifier
- æ€§èƒ½æé«˜ï¼Œåœ¨ Vite ä¸­è¢«æ·±åº¦é‡‡ç”¨

![](static/Un9qbjQOUo0Wh5xlmMZc2W6rneu.png)

#### å†…ç½®çš„ Web æ„å»ºèƒ½åŠ›

Vite å¼€ç®±å³ç”¨çš„åŠŸèƒ½ç­‰ä»·äº

- webpack
- webpack-dev-server
- css-loader
- style-loader
- less-loader
- sass-loader
- postcss-loader
- file-loader
- MiniCssExtractPlugin
- HTMLWebpackPlugin

![](static/VbCgbATfSoekZPxzZfucrgaanwd.png)

### Vite ä¸Šæ‰‹å®æˆ˜

#### Vite é¡¹ç›®åˆå§‹åŒ–

```bash
# Install pnpm
npm i -g pnpm
# Initialize Commands
pnpm create vite
# Install Dependences
pnpm install
# Start Project
npm run dev
```

#### ä½¿ç”¨ Sass / Scss & CSS Modules

![](static/EEWEbixbvo21Gwx5SDsciBHtnkf.png)
![](static/TaSOb3V7iocgSoxwb9YcRXXQnyh.png)
![](static/Ctm8bTFXdoUveJxLOKSc35STnmf.png)
![](static/EyOzbFTkLoxPyZxl0aWcf1j9nUc.png)
![](static/BDdDbLrw3oGBozxBZ7lcEbWxn6b.png)

#### ä½¿ç”¨é™æ€èµ„æº

é™¤äº†å¸¸è§çš„å›¾ç‰‡æ ¼å¼ï¼ŒVite ä¹Ÿå†…ç½®äº†å¯¹äº JSONã€Workerã€WASM èµ„æºçš„åŠ è½½æ”¯æŒ [Vite â€”â€” é™æ€èµ„æºå¤„ç†](https://cn.vitejs.dev/guide/features.html#static-assets)

![](static/QJWqbAgxXo8upVxMPiYc4SKVnFB.png)

#### ç”Ÿäº§ç¯å¢ƒ Tree Shaking

åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒTree Shaking æ˜¯ä¸€ä¸ªé‡è¦çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒç”¨äºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‰”é™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œä»¥å‡å°æœ€ç»ˆæ‰“åŒ…åçš„æ–‡ä»¶å¤§å°ã€‚Tree Shaking ä¸»è¦é’ˆå¯¹ ES æ¨¡å—ç³»ç»Ÿä¸­çš„ä»£ç ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨åƒ Webpackã€Rollup æˆ– Vite è¿™æ ·çš„æ„å»ºå·¥å…·æ—¶è¡¨ç°å°¤ä¸ºå‡ºè‰²ã€‚

Tree Shaking çš„å·¥ä½œåŸç†æ˜¯åŸºäºé™æ€ä»£ç åˆ†æçš„ã€‚å®ƒä¼šæ£€æŸ¥æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ä»ä»£ç ä¸­è¯†åˆ«å‡ºæœªè¢«ä½¿ç”¨çš„éƒ¨åˆ†ã€‚è¿™äº›æœªä½¿ç”¨çš„ä»£ç ç‰‡æ®µä¼šåœ¨æœ€ç»ˆçš„æ„å»ºè¿‡ç¨‹ä¸­è¢«ç§»é™¤ï¼Œä»è€Œå‡å°äº†è¾“å‡ºæ–‡ä»¶çš„ä½“ç§¯ã€‚

åœ¨ Vite ä¸­ï¼ŒTree Shaking æ˜¯é»˜è®¤å¯ç”¨çš„ã€‚ä½†æ˜¯ï¼Œä¸ºç¡®ä¿ Tree Shaking çš„æœ‰æ•ˆæ€§ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

1. ä½¿ç”¨ ES æ¨¡å—ï¼š ç¡®ä¿æ‚¨çš„ä»£ç ä½¿ç”¨ ES æ¨¡å—ï¼ˆå³ `import` å’Œ `export` è¯­æ³•ï¼‰ã€‚CommonJS æ¨¡å—ï¼ˆ`require` å’Œ `module.exports`ï¼‰ä¸æ”¯æŒ Tree Shakingã€‚
2. é¿å…å‰¯ä½œç”¨ï¼š åœ¨æ‚¨çš„ä»£ç ä¸­å°½é‡é¿å…å¼•å…¥æœ‰å‰¯ä½œç”¨çš„ä»£ç ï¼ˆæ¯”å¦‚ç›´æ¥æ“ä½œå…¨å±€ä½œç”¨åŸŸæˆ–ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ï¼‰ã€‚è¿™æœ‰åŠ©äº Tree Shaking çš„å‡†ç¡®æ€§ã€‚
3. ä½¿ç”¨çº¯å‡½æ•°ï¼š ä½¿ç”¨çº¯å‡½æ•°å¯ä»¥å¢åŠ  Tree Shaking çš„æ•ˆæœã€‚çº¯å‡½æ•°æ˜¯æŒ‡å‡½æ•°çš„è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸å—å¤–éƒ¨çŠ¶æ€çš„å½±å“ã€‚
4. æŒ‰éœ€å¼•å…¥åº“ï¼š åœ¨å¼•å…¥ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå°½é‡åªå¼•å…¥æ‚¨å®é™…ä½¿ç”¨çš„éƒ¨åˆ†ã€‚ä¸€äº›åº“å¯èƒ½ä¼šå°†æ•´ä¸ªåº“éƒ½æ‰“åŒ…è¿›æ¥ï¼Œä½†æ‚¨å¯ä»¥é€šè¿‡æŒ‰éœ€å¼•å…¥æ¥æœ€å°åŒ–æ‰“åŒ…æ–‡ä»¶å¤§å°ã€‚
5. é¿å…åŠ¨æ€å¼•å…¥ï¼š åŠ¨æ€ `import()` è¯­æ³•ä¼šå¯¼è‡´ Tree Shaking å¤±æ•ˆï¼Œå› ä¸ºå®ƒåœ¨è¿è¡Œæ—¶å†³å®šåŠ è½½å“ªä¸ªæ¨¡å—ã€‚å°½é‡é¿å…åœ¨éœ€è¦ Tree Shaking çš„ä»£ç ä¸­ä½¿ç”¨åŠ¨æ€å¼•å…¥ã€‚

### Vite æ•´ä½“æ¶æ„

![](static/V7wjbZM01ompUSxfjBnchTdsnUb.png)

#### ä¾èµ–é¢„æ‰“åŒ…

![](static/LnFrbwFS8o7ZWmxyFalc5C4yngd.png)

- è¿›è¡Œé¢„æ‰“åŒ…çš„åŸå› 

  - é¿å… node_modules è¿‡å¤šçš„æ–‡ä»¶è¯·æ±‚
  - å°† CommonJS æ ¼å¼è½¬æ¢ä¸º ESM æ ¼å¼
- å®ç°åŸç†

  - æœåŠ¡å¯åŠ¨å‰æ‰«æä»£ç ä¸­ç”¨åˆ°çš„ä¾èµ–
  - ç”¨ ES build å¯¹ä¾èµ–ä»£ç è¿›è¡Œé¢„æ‰“åŒ…
  - æ”¹å†™ import è¯­å¥ï¼ŒæŒ‡å®šä¾èµ–ä¸ºé¢„æ„å»ºäº§ç‰©è·¯å¾„

![](static/UT1sbFSfyo0YDoxaBIHcTIaan6g.png)

#### å•æ–‡ä»¶ç¼–è¯‘

ç”¨ ES build ç¼–è¯‘ TS/JSX

![](static/REZQbv47RoQUSHxcPUCca9ebnNe.png)

ä¼˜åŠ¿ï¼šç¼–è¯‘é€Ÿåº¦æå‡ 10-100x

å±€é™æ€§ï¼šä¸æ”¯æŒç±»å‹æ£€æŸ¥ã€ä¸æ”¯æŒè¯­æ³•é™çº§åˆ° ES5

#### ä»£ç å‹ç¼©

Esbuild ä½œä¸ºé»˜è®¤å‹ç¼©å·¥å…·ï¼Œæ›¿æ¢ä¼ ç»Ÿçš„ Terserã€Uglify.js ç­‰å‹ç¼©å·¥å…·ã€‚

![](static/EULBbB1oBoBnw2xRJMacXRtcn3b.png)

#### æ’ä»¶æœºåˆ¶

![](static/Gzlibf4vToyszGx4W7FcOPLnn7b.png)

- å¼€å‘é˜¶æ®µ -> æ¨¡æ‹Ÿ Rollup æ’ä»¶æœºåˆ¶
- ç”Ÿäº§ç¯å¢ƒ -> ç›´æ¥ä½¿ç”¨ Rollup

### Vite è¿›é˜¶è·¯çº¿

#### æ·±å…¥åŒå¼•æ“

ES buildï¼š[esbuild - An extremely fast bundler for the web](https://esbuild.github.io/)

Rollup.jsï¼š[Rollup](http://rollupjs.org)

#### Vite æ’ä»¶å¼€å‘

![](static/IwD8bE2eLoLRtsxEuiicmM0On6e.png)

é€šè¿‡ä¸Šè¿°çš„ Hookï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒçš„æ„å»ºé˜¶æ®µæ’å…¥è‡ªå®šä¹‰çš„é€»è¾‘ã€‚

![](static/LthubrVmDoRCeGxh4otcoYgLnIe.png)

![](static/IbtwbQrxVoAZ15xPL1ucjzbcnsg.png)

å‚è€ƒèµ„æ–™ï¼š

[Vite æ’ä»¶å¼€å‘æ–‡æ¡£](https://cn.vitejs.dev/guide/api-plugin.html)

å¤æ‚åº¦è¾ƒä½çš„æ’ä»¶ï¼š[JSON åŠ è½½æ’ä»¶](https://github.com/vitejs/vite/blob/main/packages/vite/src/node/plugins/json.ts)

å¤æ‚åº¦ä¸­ç­‰çš„æ’ä»¶ï¼š[ES build æ¥å…¥æ’ä»¶](https://github.com/vitejs/vite/blob/main/packages/vite/src/node/plugins/esbuild.ts)

å¤æ‚åº¦è¾ƒé«˜çš„æ’ä»¶ï¼š[å®˜æ–¹ React æ’ä»¶](https://github.com/vitejs/vite/tree/main/packages/plugin-react)

#### ä»£ç åˆ†å‰²(æ‹†åŒ…)

ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰æ˜¯ä¸€ç§ä¼˜åŒ–å‰ç«¯åº”ç”¨æ€§èƒ½çš„æŠ€æœ¯ï¼Œæ—¨åœ¨å°†åº”ç”¨çš„ä»£ç åˆ†æˆå¤šä¸ªå°å—ï¼ˆæˆ–æ¨¡å—ï¼‰ï¼Œå¹¶åœ¨éœ€è¦æ—¶æŒ‰éœ€åŠ è½½ã€‚è¿™æ ·åšçš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘åˆå§‹åŠ è½½æ—¶æ‰€éœ€çš„ä»£ç é‡ï¼Œä»è€ŒåŠ å¿«é¡µé¢çš„åŠ è½½é€Ÿåº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

ä¼ ç»Ÿä¸Šï¼Œå‰ç«¯åº”ç”¨ç¨‹åºé€šå¸¸å°†æ‰€æœ‰ä»£ç æ‰“åŒ…åˆ°ä¸€ä¸ªå•ä¸€çš„æ–‡ä»¶ä¸­ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·åœ¨è®¿é—®é¡µé¢æ—¶å¿…é¡»ä¸‹è½½æ•´ä¸ªåº”ç”¨çš„ä»£ç ï¼Œå³ä½¿ç”¨æˆ·å¯èƒ½ä»…ä»…æµè§ˆäº†å…¶ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹ã€‚ä»£ç åˆ†å‰²å…è®¸å¼€å‘è€…å°†åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªè¾ƒå°çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½æˆ–è·¯ç”±ï¼Œç„¶ååœ¨éœ€è¦æ—¶è¿›è¡ŒæŒ‰éœ€åŠ è½½ã€‚

ä»£ç åˆ†å‰²æœ‰å‡ ä¸ªä¸»è¦ä¼˜ç‚¹ï¼š

1. å‡å°‘åˆå§‹åŠ è½½æ—¶é—´ï¼š é€šè¿‡å°†ä»£ç åˆ†å‰²æˆå°å—ï¼Œé¡µé¢çš„åˆå§‹åŠ è½½æ—¶é—´å¯ä»¥å¤§å¤§å‡å°‘ï¼Œå› ä¸ºåªæœ‰å½“å‰é¡µé¢æ‰€éœ€çš„ä»£ç å—ä¼šè¢«åŠ è½½ã€‚
2. æå‡ç”¨æˆ·ä½“éªŒï¼š ç”¨æˆ·èƒ½å¤Ÿæ›´å¿«åœ°è®¿é—®é¡µé¢å†…å®¹ï¼Œå› ä¸ºä¸éœ€è¦ç­‰å¾…æ•´ä¸ªåº”ç”¨çš„ä»£ç éƒ½åŠ è½½å®Œæˆã€‚
3. èŠ‚çœå¸¦å®½ï¼š å¯¹äºè®¿é—®å¤šä¸ªé¡µé¢çš„åº”ç”¨ï¼Œä»£ç åˆ†å‰²å¯ä»¥å‡å°‘å¸¦å®½çš„ä½¿ç”¨ï¼Œå› ä¸ºç”¨æˆ·åªä¼šä¸‹è½½å½“å‰é¡µé¢æ‰€éœ€çš„ä»£ç ã€‚
4. ä¼˜åŒ–ç¼“å­˜ï¼š å½“ç”¨æˆ·åœ¨ä¸åŒé¡µé¢ä¹‹é—´å¯¼èˆªæ—¶ï¼Œåªéœ€è¦åŠ è½½æ–°é¡µé¢çš„ä»£ç å—ï¼Œè€Œä¹‹å‰åŠ è½½è¿‡çš„ä»£ç å—å¯ä»¥ä»ç¼“å­˜ä¸­é‡ç”¨ã€‚

**æ‹†åŒ…å‰ï¼š**

![](static/BBL6bwKvqokDWxx2rEHcFf8Inhf.png)

> é—®é¢˜ï¼š
>
> - æ— æ³•è¿›è¡Œå¹¶å‘è¯·æ±‚
> - ç¼“å­˜å¤ç”¨ç‡ä½

**æ‹†åŒ…åï¼š**

![](static/ZCBEbUbm1oY6jixvErlcfpkvngc.png)

**å‚è€ƒèµ„æ–™ï¼š**

[Rollup - API Configuration Options](https://rollupjs.org/configuration-options/#output-manualchunks)

[Vite - API Configuration Options](https://cn.vitejs.dev/config/build-options.html#build-rollupoptions)

#### JS ç¼–è¯‘å·¥å…·(Babel)

Babel æ˜¯ä¸€ä¸ªæµè¡Œçš„ JavaScript ç¼–è¯‘å·¥å…·ï¼Œç”¨äºå°†æ–°ç‰ˆæœ¬çš„ JavaScript ä»£ç è½¬æ¢ä¸ºæ—§ç‰ˆæœ¬çš„ä»£ç ï¼Œä»¥ä¾¿åœ¨ä¸æ”¯æŒæœ€æ–°è¯­æ³•å’ŒåŠŸèƒ½çš„æµè§ˆå™¨æˆ–ç¯å¢ƒä¸­è¿è¡Œã€‚å®ƒä¸»è¦ç”¨äºå°† ES6+ï¼ˆECMAScript 2015 åŠæ›´é«˜ç‰ˆæœ¬ï¼‰ä»£ç è½¬æ¢ä¸º ES5 ä»£ç ï¼Œä»¥åŠåº”ç”¨å…¶ä»–è½¬æ¢ï¼Œå¦‚ TypeScript è½¬æ¢ã€JSX è½¬æ¢ç­‰ã€‚Babel çš„ä¸»è¦ç›®æ ‡æ˜¯å¸®åŠ©å¼€å‘è€…åœ¨ä¸åŒçš„ JavaScript ç¯å¢ƒä¸­å®ç°è·¨æµè§ˆå™¨å…¼å®¹æ€§å’Œè¯­æ³•æ”¯æŒã€‚

Babel æä¾›äº†ä¸€å¥—æ’ä»¶ç³»ç»Ÿï¼Œå…è®¸å¼€å‘è€…æ ¹æ®éœ€è¦æ·»åŠ ä¸åŒçš„æ’ä»¶æ¥æ‰§è¡Œå„ç§è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ Babel çš„æ’ä»¶æ¥è½¬æ¢ç®­å¤´å‡½æ•°ã€è§£æ„èµ‹å€¼ã€æ¨¡æ¿å­—ç¬¦ä¸²ç­‰ ES6+ ç‰¹æ€§ä¸º ES5 ä»£ç ã€‚Babel è¿˜æ”¯æŒé¢„è®¾ï¼ˆPresetsï¼‰ï¼Œé¢„è®¾æ˜¯ä¸€ç»„é¢„å®šä¹‰çš„æ’ä»¶é›†åˆï¼Œå¯ä»¥æ–¹ä¾¿åœ°å¯ç”¨ä¸€ç»„å¸¸ç”¨çš„è½¬æ¢ã€‚

![](static/ZO21bJjoyoqGaDxErInc5Cz9n0c.png)

**å‡ºç°çš„åŸå› ï¼š**

- JavaScript è¯­æ³•æ ‡å‡†ç¹å¤šï¼Œæµè§ˆå™¨æ”¯æŒç¨‹åº¦ä¸åŒ
- å¼€å‘è€…éœ€è¦ç”¨åˆ°é«˜çº§è¯­æ³•

**å‚è€ƒèµ„æ–™ï¼š**

[babel å®˜æ–¹ç«™ç‚¹](https://babeljs.io/docs/)

[babel æ’ä»¶æ‰‹å†Œ](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md)

#### è¯­æ³•å®‰å…¨é™çº§

ä»¥ Promise è¯­æ³•ä¸ºä¾‹ï¼ŒIE11 æ²¡æœ‰æ”¯æŒ

![](static/PfOAbfzraoVj1uxqZHvcwUJ4nFg.png)

**åœ¨æ„å»ºäº§ç‰©ä¸­é¿å…è¿™äº›é—®é¢˜çš„æ–¹æ³•ï¼š**

- ä¸Šå±‚è§£å†³æ–¹æ¡ˆï¼š@vitejs/plugin-legacy
- åº•å±‚åŸç†

  - å€ŸåŠ© Babel è¿›è¡Œè¯­æ³•è‡ªåŠ¨é™çº§
  - æå‰æ³¨å…¥ Polyfill å®ç°ï¼Œå¦‚ core-js, regenerator-runtime

**å‚è€ƒèµ„æ–™ï¼š**

[@babel/preset-env Document](https://babeljs.io/docs/babel-preset-env)

[Vite å®˜æ–¹é™çº§æ’ä»¶æ–‡æ¡£](https://github.com/vitejs/vite/tree/main/packages/plugin-legacy)

#### æœåŠ¡ç«¯æ¸²æŸ“ (SSR)

æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆServer-Side Renderingï¼Œç®€ç§° SSRï¼‰æ˜¯ä¸€ç§ç”¨äºæ„å»ºå‰ç«¯åº”ç”¨çš„æŠ€æœ¯ï¼Œå®ƒä¸ä¼ ç»Ÿçš„å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆClient-Side Renderingï¼Œç®€ç§° CSRï¼‰æœ‰æ‰€ä¸åŒã€‚åœ¨ SSR ä¸­ï¼Œéƒ¨åˆ†æˆ–å…¨éƒ¨é¡µé¢å†…å®¹æ˜¯åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„ï¼Œç„¶åå°†å·²æ¸²æŸ“çš„ HTML å†…å®¹å‘é€åˆ°æµè§ˆå™¨ï¼Œè€Œä¸æ˜¯åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ JavaScript åŠ¨æ€ç”Ÿæˆå’Œæ¸²æŸ“é¡µé¢å†…å®¹ã€‚

åœ¨ä¼ ç»Ÿçš„ CSR ä¸­ï¼Œé¡µé¢çš„åˆå§‹åŠ è½½ä¼šå¯¼è‡´æµè§ˆå™¨ä¸‹è½½ä¸€ä¸ªåŒ…å« JavaScript ä»£ç çš„ HTML æ–‡ä»¶ï¼Œç„¶åæµè§ˆå™¨ä¼šæ‰§è¡Œè¯¥ä»£ç ä»¥ç”Ÿæˆé¡µé¢å†…å®¹ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´é¡µé¢åœ¨åˆå§‹åŠ è½½æ—¶å‡ºç°ç™½å±æˆ–åŠ è½½è¿‡æ…¢çš„æƒ…å†µï¼Œå› ä¸ºæµè§ˆå™¨éœ€è¦å…ˆä¸‹è½½å’Œæ‰§è¡Œ JavaScriptï¼Œç„¶åæ‰èƒ½ç”Ÿæˆå’Œå‘ˆç°é¡µé¢å†…å®¹ã€‚

ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSSR çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š

1. æ›´å¿«çš„åˆå§‹åŠ è½½ï¼š åœ¨ SSR ä¸­ï¼Œé¡µé¢çš„åˆå§‹åŠ è½½ä¼šåŒ…å«å·²ç»ç”Ÿæˆå¥½çš„ HTML å†…å®¹ï¼Œå› æ­¤ç”¨æˆ·èƒ½å¤Ÿæ›´å¿«åœ°çœ‹åˆ°é¡µé¢çš„å†…å®¹ï¼Œå‡å°‘ç™½å±æ—¶é—´ã€‚
2. æ›´å¥½çš„ SEOï¼š ç”±äºæœç´¢å¼•æ“å¯ä»¥ç›´æ¥çœ‹åˆ°æ¸²æŸ“å¥½çš„ HTML å†…å®¹ï¼ŒSSR é€šå¸¸å¯¹æœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰æ›´å‹å¥½ï¼Œæœ‰åŠ©äºæé«˜é¡µé¢çš„æœç´¢å¼•æ“æ’åã€‚
3. æ›´å¥½çš„æ€§èƒ½ï¼š åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼ŒSSR å¯ä»¥å‡å°‘å®¢æˆ·ç«¯çš„èµ„æºä¸‹è½½å’Œå¤„ç†è´Ÿæ‹…ï¼Œä»è€Œæå‡æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œç¯å¢ƒè¾ƒå·®æˆ–è®¾å¤‡æ€§èƒ½è¾ƒå¼±çš„æƒ…å†µä¸‹ã€‚
4. æ›´å¥½çš„å¯è®¿é—®æ€§ï¼š ä¸€äº›ç½‘ç»œçˆ¬è™«æˆ–è¾…åŠ©æŠ€æœ¯å¯èƒ½æ— æ³•ç†è§£æˆ–å¤„ç†åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ï¼Œè€Œé€šè¿‡ SSR å¯ä»¥æä¾›æ›´å¥½çš„å¯è®¿é—®æ€§ä½“éªŒã€‚

å°½ç®¡ SSR æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›æŒ‘æˆ˜ï¼Œå¦‚æœåŠ¡å™¨è´Ÿè½½å¢åŠ ã€å¼€å‘å’Œè°ƒè¯•å¤æ‚åº¦ç­‰ã€‚åœ¨é€‰æ‹©æ˜¯å¦é‡‡ç”¨ SSR æ—¶ï¼Œéœ€è¦è€ƒè™‘é¡¹ç›®çš„éœ€æ±‚ã€ç›®æ ‡å—ä¼—å’ŒæŠ€æœ¯æ ˆç­‰å› ç´ ã€‚

![](static/VnilbBd7DoZK94xpbCPcHrEJncp.png)

![](static/HoFHbS0TWods4txZaHecYQDenWg.png)

**å‚è€ƒèµ„æ–™ï¼š**

[Vite - SSR Document](https://cn.vitejs.dev/guide/ssr.html)

[Vite å®˜æ–¹ SSR-Demo Project](https://github.com/vitejs/vite/tree/main/playground/ssr-react)

[ä½¿ç”¨ Vite æ­å»º SSR Project](https://juejin.cn/book/7050063811973218341/section/7066612265536978981)

#### æ·±å…¥äº†è§£åº•å±‚æ ‡å‡†

![](static/PZ0cbTcF8oX5MPx7HSHcRbg2nqe.png)

**å‚è€ƒèµ„æ–™ï¼š**

[ES modules: A cartoon deep-dive â€“ Mozilla Hacks - the Web developer blog](https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/)

[Ship ESM & CJS in one Package](https://antfu.me/posts/publish-esm-and-cjs)

[Pure ESM package](https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c)

#### Vite ç¤¾åŒºç”Ÿæ€

â­ Github 58k+ starï¼Œå¹¶ä¸”ç›®å‰è¿˜åœ¨æŒç»­ç»´æŠ¤

ğŸ”¨ å®˜æ–¹æä¾›æ’ä»¶

- @vitejs/plugin-vue,æä¾› Vue 3 æ”¯æŒ
- @vitejs/plugin-vue-jsx,æä¾› Vue 3JSX æ”¯æŒ
- @vitejs/plugin-react,æä¾› React æ”¯æŒ
- @vitejs/plugin-legacy,æä¾›ä½ç‰ˆæœ¬æµè§ˆå™¨é™çº§æ”¯æŒ

ğŸ”¥ æµ·é‡ç¤¾åŒºæ’ä»¶ [Awesome Vite](https://github.com/vitejs/awesome-vite)

ğŸ¤© ä¼—å¤šæ¡†æ¶å†…ç½®

![](static/KT8ybeJWBoM05KxbILycDrAMnKc.png)

> ç¬”è®°è®°äº 2023 å¹´æš‘å‡ ByteDance é’è®­è¥â€”â€”å‰ç«¯
> éƒ¨åˆ†å‘å¸ƒåœ¨ç¨€åœŸæ˜é‡‘
> CHANGE
